<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
 
<title>Macerating Toilets | Pest Policy</title>
<meta name="keywords" content="
   home-improvement, toilet, challenging">


<meta name="description" content="When you dream of adding a new bathroom, basement bar, or laundry room, the first thought that often comes to mind is plumbing. Specifically, how will wast...">

<meta name="author" content="Isaac">
<link rel="canonical" href="http://localhost:1313/posts/macerating-toilets/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.24117e94f7185554bf370e131546657a05d72834bf02c67c2a4215d5cf110a80.css" integrity="sha256-JBF&#43;lPcYVVS/Nw4TFUZlegXXKDS/AsZ8KkIV1c8RCoA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/macerating-toilets/">

 
<meta name="twitter:title" content="Macerating Toilets | Pest Policy" />


<meta name="twitter:description" content="When you dream of adding a new bathroom, basement bar, or laundry room, the first thought that often comes to mind is plumbing. Specifically, how will wast..." />
<meta property="og:title" content="Macerating Toilets | Pest Policy" />
<meta property="og:description" content="When you dream of adding a new bathroom, basement bar, or laundry room, the first thought that often comes to mind is plumbing. Specifically, how will wast..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/macerating-toilets/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-07-10T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2025-07-10T00:00:00&#43;03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Macerating Toilets",
      "item": "http://localhost:1313/posts/macerating-toilets/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Macerating Toilets | Pest Policy",
  "name": "Macerating Toilets",
  "description": "When you dream of adding a new bathroom, basement bar, or laundry room, the first thought that often comes to mind is plumbing. Specifically, how will wast...",
  "keywords": [
    "home-improvement", "toilet", "challenging"
  ],
  "wordCount" : "1409",
  "inLanguage": "en",
  "datePublished": "2025-07-10T00:00:00Z",
  "dateModified": "2025-07-10T00:00:00+03:00",
  "author":{
    "@type": "Person",
    "name": "Isaac"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/macerating-toilets/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pest Policy",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
   
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369419631229178"
     crossorigin="anonymous"></script>
</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pest Policy (Alt + H)">Pest Policy</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Blog" class="active"
                >Blog
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact"
                >Contact
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Macerating Toilets</h1>
    <div class="post-description">When you dream of adding a new bathroom, basement bar, or laundry room, the first thought that often comes to mind is plumbing. Specifically, how will wast...</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>July 10, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="http://localhost:1313/tags/home-improvement/">Home-Improvement</a><a href="http://localhost:1313/tags/toilet/">Toilet</a><a href="http://localhost:1313/tags/challenging/">Challenging</a></span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>When you dream of adding a new bathroom, basement bar, or laundry room, the first thought that often comes to mind is plumbing. Specifically, how will waste water drain into the main sewer line? In conventional plumbing, gravity is king: fixtures must be positioned above the main drainpipe, allowing waste to flow downwards. This simple principle can present a significant obstacle when you want to install a bathroom in a basement below the sewer line, in an attic far from existing drains, or in any location where breaking through concrete floors or extensive re-piping for gravity drainage is impractical, impossible, or prohibitively expensive.</p>
<p>Enter the <strong>macerating <a href="/posts/high-end-toilet-brands/">toilet</a></strong>, a clever plumbing solution designed to overcome these gravitational challenges. Also known as an upflush toilet, a macerating toilet doesn&rsquo;t rely on gravity to move waste. Instead, it uses a powerful grinding mechanism to liquefy waste and then pumps it under pressure to the main drainpipe, even if that pipe is located above the toilet. This innovative technology opens up a world of possibilities for adding plumbing fixtures in unconventional locations, making that dream basement bathroom a reality without major structural overhauls. This article will delve into <strong>how macerating toilets work</strong>, when they are the ideal choice, and explore their pros, cons, and essential maintenance considerations.</p>
<hr>
<h2 id="how-do-macerating-toilets-work">How Do Macerating Toilets Work?<a hidden class="anchor" aria-hidden="true" href="#how-do-macerating-toilets-work">¶</a></h2>
<p>The operation of a macerating toilet fundamentally differs from a traditional gravity-fed system. Here&rsquo;s a breakdown:</p>
<ol>
<li><strong>The Bowl:</strong> Macerating toilets typically use a conventional-looking toilet bowl, though it&rsquo;s usually designed for a slightly different flush mechanism. Some systems use standard rear-outlet toilet bowls, while others come as a complete integrated unit.</li>
<li><strong>The Macerating Unit (Pump Box):</strong> This is the heart of the system. The bowl connects directly to a sealed pump box, which is usually located behind or beside the toilet (and sometimes integrated into the bowl unit itself). This box contains:
<ul>
<li><strong>Blades/Grinder:</strong> High-speed rotating blades (the &ldquo;macerator&rdquo;) that activate upon flushing. When waste (both solid and liquid) and toilet paper enter the chamber, these blades rapidly liquefy it into a fine slurry.</li>
<li><strong>Pressure-Activated Switch:</strong> A sensor in the box detects the rising water level after a flush.</li>
<li><strong>Pump:</strong> Once activated, a powerful pump pushes the liquefied waste through a small-diameter discharge pipe.</li>
</ul>
</li>
<li><strong>Discharge Pipe:</strong> Unlike standard toilets that require a 3-inch or 4-inch drainpipe for gravity flow, macerating toilets use a much smaller <strong>1-inch or 1.25-inch diameter discharge pipe</strong>. This is a significant advantage for retrofitting.</li>
<li><strong>Upward or Horizontal Pumping:</strong> The pump can push the waste not only horizontally for long distances but also <strong>vertically</strong> (up to 15 feet in some models) to reach an overhead main drain or soil stack.</li>
<li><strong>Connection to Main Drain:</strong> The small discharge pipe eventually connects to the home&rsquo;s main sewer line or soil stack.</li>
<li><strong>Additional Fixtures:</strong> Many macerating units are designed to handle waste from multiple fixtures. You can often connect a sink, shower, or even a washing machine (depending on the model&rsquo;s capacity) to the same macerating unit, allowing for a complete bathroom installation.</li>
</ol>
<hr>
<h2 id="when-should-you-choose-a-macerating-toilet">When Should You Choose a Macerating Toilet?<a hidden class="anchor" aria-hidden="true" href="#when-should-you-choose-a-macerating-toilet">¶</a></h2>
<p>Macerating toilets are not typically a first choice for standard bathroom installations where gravity drainage is easily achievable. They truly shine in specific scenarios:</p>
<ul>
<li><strong>Basement Bathrooms Below the Sewer Line:</strong> This is the most common application. If your basement floor is below the level of your main drainpipe, a macerating toilet is often the most cost-effective and least disruptive solution, as it eliminates the need for costly concrete excavation and the installation of an ejector pit.</li>
<li><strong>Attic Bathrooms or Upper Floors:</strong> When adding a bathroom far from existing drain lines on an upper floor or in an attic, running a small-diameter discharge pipe can be significantly easier and less intrusive than installing large gravity drain lines.</li>
<li><strong>Renovations with Limited Structural Changes:</strong> If you want to add a bathroom but cannot or do not want to break up concrete slabs, move floor joists, or undertake extensive demolition for conventional plumbing.</li>
<li><strong>Commercial Spaces:</strong> For adding a restroom in a retail space, office, or warehouse without extensive construction.</li>
<li><strong>Temporary or Specialized Installations:</strong> For pop-up events, temporary structures, or certain mobile applications where conventional plumbing is not practical.</li>
</ul>
<hr>
<h2 id="what-are-the-pros-of-a-macerating-toilet">What Are the Pros of a Macerating Toilet?<a hidden class="anchor" aria-hidden="true" href="#what-are-the-pros-of-a-macerating-toilet">¶</a></h2>
<ol>
<li><strong>Flexible Installation Location:</strong> The greatest advantage. You can install a bathroom virtually anywhere, regardless of its relation to the main drain line.</li>
<li><strong>No Major Concrete Work:</strong> Eliminates the need for jackhammering concrete slabs in basements, saving significant time, labor, and mess.</li>
<li><strong>Smaller Diameter Piping:</strong> The 1-inch or 1.25-inch discharge pipe is much easier to route through walls, floors, and ceilings compared to a 3-inch or 4-inch gravity drain line.</li>
<li><strong>Cost-Effective for Specific Scenarios:</strong> While the unit itself is more expensive than a conventional toilet, the overall project cost can be significantly lower when considering the labor and materials saved by avoiding extensive excavation and re-piping.</li>
<li><strong>Multi-Fixture Capability:</strong> Many units can handle drainage from a toilet, sink, shower, and even small appliances, enabling a full bathroom addition.</li>
<li><strong>Relative Ease of Retrofit:</strong> Much simpler to add plumbing to an existing structure without major overhauls.</li>
</ol>
<hr>
<h2 id="what-are-the-cons-of-a-macerating-toilet">What Are the Cons of a Macerating Toilet?<a hidden class="anchor" aria-hidden="true" href="#what-are-the-cons-of-a-macerating-toilet">¶</a></h2>
<ol>
<li><strong>Higher Upfront Cost:</strong> The macerating unit itself is more expensive than a standard toilet.</li>
<li><strong>Noise:</strong> The macerator and pump motor can be noisy during operation. While manufacturers are working to reduce sound levels, it will generally be louder than a gravity flush.</li>
<li><strong>Reliance on Electricity:</strong> The unit requires an electrical outlet to power the motor. This means it won&rsquo;t work during a power outage.</li>
<li><strong>Maintenance Sensitivity:</strong> Macerating toilets are more susceptible to blockages if non-flushable items (wet wipes, feminine hygiene products, excessive toilet paper) are flushed, as these can jam the macerator blades.</li>
<li><strong>Mechanical Complexity:</strong> They have more moving parts (motor, blades, pump, pressure switch) than a gravity toilet, meaning more components that can potentially fail.</li>
<li><strong>Repair Costs:</strong> Repairs typically require a specialized plumber or technician familiar with these units, and parts can be more expensive.</li>
<li><strong>Slightly Less Reliable (Compared to Gravity):</strong> While generally dependable, any mechanical system has a higher chance of malfunction than a purely gravity-fed one.</li>
<li><strong>Odor Potential (If Not Maintained):</strong> If the unit is not properly vented (it needs its own vent to the outside) or cleaned, there can be potential for odors, though modern units are well-sealed.</li>
</ol>
<hr>
<h2 id="macerating-toilet-installation-and-maintenance-tips">Macerating Toilet Installation and Maintenance Tips<a hidden class="anchor" aria-hidden="true" href="#macerating-toilet-installation-and-maintenance-tips">¶</a></h2>
<h3 id="installation-tips">Installation Tips:<a hidden class="anchor" aria-hidden="true" href="#installation-tips">¶</a></h3>
<ul>
<li><strong>Follow Manufacturer Instructions:</strong> Crucial for optimal performance and warranty.</li>
<li><strong>Dedicated Electrical Circuit:</strong> Most units require a dedicated, grounded electrical outlet. Consult an electrician if needed.</li>
<li><strong>Proper Venting:</strong> The macerating unit <em>must</em> be vented to the outside, similar to a standard plumbing vent stack, to prevent vacuum locks and odor issues. Never vent into an attic or crawl space.</li>
<li><strong>Access for Maintenance:</strong> Position the unit where it can be easily accessed for cleaning or servicing, even if it&rsquo;s hidden behind a wall or a removable panel.</li>
<li><strong>Correct Pipe Sizing:</strong> Use the precise diameter of discharge pipe recommended by the manufacturer (usually 1&quot; or 1.25&quot;).</li>
<li><strong>No Soft-Close Toilets:</strong> If connecting to a standard rear-outlet toilet bowl, ensure it&rsquo;s not a soft-close toilet, as these typically have a different trapway.</li>
</ul>
<h3 id="maintenance-tips">Maintenance Tips:<a hidden class="anchor" aria-hidden="true" href="#maintenance-tips">¶</a></h3>
<ul>
<li><strong>Educate Users:</strong> Emphasize that only human waste and toilet paper (preferably single-ply or macerating-toilet-compatible) should ever be flushed. No wet wipes, cotton balls, feminine hygiene products, paper towels, or dental floss. This is the most important maintenance tip.</li>
<li><strong>Regular Cleaning:</strong> Clean the toilet bowl as usual. For the macerating unit itself, some manufacturers recommend specialized cleaning solutions to prevent mineral buildup and odors. Never use harsh drain cleaners, as they can damage the internal components.</li>
<li><strong>Listen for Changes:</strong> Pay attention to any unusual noises, increased vibration, or changes in flushing performance, as these can be early indicators of a problem.</li>
<li><strong>Check Electrical Connection:</strong> If the unit stops working, first check the power supply and circuit breaker.</li>
<li><strong>Professional Servicing:</strong> For internal mechanical issues, it&rsquo;s best to call a plumber or a service technician specializing in macerating toilets.</li>
</ul>
<hr>
<h2 id="final-thoughts-about-macerating-toilets">Final Thoughts About Macerating Toilets<a hidden class="anchor" aria-hidden="true" href="#final-thoughts-about-macerating-toilets">¶</a></h2>
<p>Macerating toilets are an ingenious and practical plumbing solution for homeowners facing significant limitations with conventional gravity drainage. They unlock the potential for adding bathrooms in basements, attics, or extensions where traditional plumbing would be prohibitively expensive or impossible. While they come with a higher initial cost, electrical dependency, and a need for careful usage to prevent clogs, their ability to provide full bathroom functionality without major structural upheaval makes them an invaluable option. For specific challenging installations, a macerating toilet can truly turn a plumbing dream into a reality.</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/macbook-pro-touch-bar-increases-productivity-in-music-making/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>Macbook Pro Touch Bar Increases Productivity in Music Making</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/male-vs-female-bed-bug/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>Male Vs Female Bed Bug</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span style="display: inline-block; margin-left: 1em; font-size: 18px;">
    We may earn a commission when you click and buy from Amazon.com.
  <span style="display: inline-block; margin-left: 1em;">
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
