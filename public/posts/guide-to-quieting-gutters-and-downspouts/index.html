<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
 
<title>Guide to Quieting Gutters and Downspouts | Pest Policy</title>
<meta name="keywords" content="
   gutters, gutter, downspout">


<meta name="description" content="The gentle pitter-patter of rain can be a soothing sound, but when it turns into an irritating drumming, clanging, or gurgling symphony emanating from your...">

<meta name="author" content="Isaac">
<link rel="canonical" href="http://localhost:1313/posts/guide-to-quieting-gutters-and-downspouts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.24117e94f7185554bf370e131546657a05d72834bf02c67c2a4215d5cf110a80.css" integrity="sha256-JBF&#43;lPcYVVS/Nw4TFUZlegXXKDS/AsZ8KkIV1c8RCoA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/guide-to-quieting-gutters-and-downspouts/">

 
<meta name="twitter:title" content="Guide to Quieting Gutters and Downspouts | Pest Policy" />


<meta name="twitter:description" content="The gentle pitter-patter of rain can be a soothing sound, but when it turns into an irritating drumming, clanging, or gurgling symphony emanating from your..." />
<meta property="og:title" content="Guide to Quieting Gutters and Downspouts | Pest Policy" />
<meta property="og:description" content="The gentle pitter-patter of rain can be a soothing sound, but when it turns into an irritating drumming, clanging, or gurgling symphony emanating from your..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/guide-to-quieting-gutters-and-downspouts/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-07-10T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2025-07-10T00:00:00&#43;03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Guide to Quieting Gutters and Downspouts",
      "item": "http://localhost:1313/posts/guide-to-quieting-gutters-and-downspouts/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Guide to Quieting Gutters and Downspouts | Pest Policy",
  "name": "Guide to Quieting Gutters and Downspouts",
  "description": "The gentle pitter-patter of rain can be a soothing sound, but when it turns into an irritating drumming, clanging, or gurgling symphony emanating from your...",
  "keywords": [
    "gutters", "gutter", "downspout"
  ],
  "wordCount" : "1542",
  "inLanguage": "en",
  "datePublished": "2025-07-10T00:00:00Z",
  "dateModified": "2025-07-10T00:00:00+03:00",
  "author":{
    "@type": "Person",
    "name": "Isaac"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/guide-to-quieting-gutters-and-downspouts/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pest Policy",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
   
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369419631229178"
     crossorigin="anonymous"></script>
</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pest Policy (Alt + H)">Pest Policy</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Blog" class="active"
                >Blog
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact"
                >Contact
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Guide to Quieting Gutters and Downspouts</h1>
    <div class="post-description">The gentle pitter-patter of rain can be a soothing sound, but when it turns into an irritating drumming, clanging, or gurgling symphony emanating from your...</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>July 10, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="http://localhost:1313/tags/gutters/">Gutters</a><a href="http://localhost:1313/tags/gutter/">Gutter</a><a href="http://localhost:1313/tags/downspout/">Downspout</a></span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>The gentle pitter-patter of rain can be a soothing sound, but when it turns into an irritating drumming, clanging, or gurgling symphony emanating from your <a href="/posts/all-american-gutters-reviews/">gutters</a> and downspouts, it quickly loses its charm. Noisy gutters are a common complaint for homeowners, especially those whose bedrooms or living areas are situated near a downspout or a long <a href="/posts/are-gutters-necessary/">gutter</a> run. This excessive noise can disrupt sleep, interfere with conversations, and generally detract from the tranquility of your home.</p>
<p>The good news is that most gutter and downspout noise issues are preventable or fixable with some targeted DIY efforts. The culprits often include loose components, improper water flow, or even simply the material and design of the system. Understanding the source of the noise is the first step towards a quieter home during a rainstorm.</p>
<p>This guide will explore several DIY methods to quiet your noisy gutters and downspouts, from simple tightening and clever tricks to considering more significant solutions. We&rsquo;ll also touch upon when a full replacement might be necessary to finally achieve peace and quiet.</p>
<hr>
<h2 id="diy-method-tighten-loose-fixtures">DIY Method: Tighten Loose Fixtures<a hidden class="anchor" aria-hidden="true" href="#diy-method-tighten-loose-fixtures">¶</a></h2>
<p>This is often the simplest and most effective first step, as rattling and clanging are frequently caused by loose components.</p>
<ul>
<li><strong>Why it helps:</strong> As gutters age or are exposed to strong winds, heavy rain, or ice, their fasteners (hangers, screws, straps) can loosen. This allows the gutter sections or downspouts to vibrate and clang against the fascia board or against each other when hit by water or wind.</li>
<li><strong>How to do it:</strong>
<ol>
<li><strong>Safety First:</strong> Always use a sturdy ladder and follow all ladder safety guidelines. Wear work gloves and safety glasses. Have a spotter if possible.</li>
<li><strong>Inspect Gutters:</strong> Carefully inspect the entire length of your gutters. Look for:
<ul>
<li><strong>Loose Hangers:</strong> Are any gutter hangers (the brackets that attach the gutter to the fascia) loose or pulling away? Try wiggling them.</li>
<li><strong>Loose Gutter Sections:</strong> Are sections joined by connectors loose or rattling?</li>
<li><strong>Improper Pitch:</strong> While not directly a &ldquo;loose fixture,&rdquo; an incorrect pitch can lead to standing water, which then makes clanging worse as new water hits stagnant pools.</li>
</ul>
</li>
<li><strong>Tighten/Secure Gutters:</strong>
<ul>
<li>For loose hangers, use a drill/driver to tighten existing screws or replace them with longer, exterior-grade screws if they&rsquo;re stripped. Aim for a rafter behind the fascia if possible for maximum grip.</li>
<li>If sections are loose at connectors, ensure the connection is snug. You might reinforce with self-tapping sheet metal screws or pop rivets, then seal thoroughly with gutter sealant.</li>
</ul>
</li>
<li><strong>Inspect Downspouts:</strong> Examine the entire length of your downspouts.
<ul>
<li><strong>Loose Straps:</strong> Are the straps that secure the downspout to the house wall loose or missing?</li>
<li><strong>Loose Connections:</strong> Are the connections between downspout sections, or where the downspout connects to the gutter outlet, loose or wobbly?</li>
</ul>
</li>
<li><strong>Tighten/Secure Downspouts:</strong>
<ul>
<li>Re-secure loose downspout straps to the wall with longer screws, or add new straps (every 4-6 feet) if insufficient.</li>
<li>Tighten or add self-tapping sheet metal screws to downspout connections. You can also apply a bead of exterior-grade gutter sealant around these connections.</li>
</ul>
</li>
</ol>
</li>
<li><strong>Result:</strong> This can significantly reduce rattling, clanging, and banging noises during heavy rainfall.</li>
</ul>
<hr>
<h2 id="diy-method-caulk--rope-trick-or-sponge-method">DIY Method: Caulk &amp; Rope Trick (or Sponge Method)<a hidden class="anchor" aria-hidden="true" href="#diy-method-caulk--rope-trick-or-sponge-method">¶</a></h2>
<p>This method directly addresses the sound of water drumming inside the downspout or splashing within the gutter trough.</p>
<ul>
<li>
<p><strong>Why it helps:</strong> The primary cause of &ldquo;drumming&rdquo; or &ldquo;gurgling&rdquo; sounds in downspouts is water free-falling and hitting the bottom of the downspout (or standing water within it), creating a hollow echo. Similarly, water splashing into standing water in a low-pitched gutter can create noise.</p>
</li>
<li>
<p><strong>How to do it (Caulk &amp; Rope for Downspouts):</strong></p>
<ol>
<li><strong>Clean Downspout:</strong> Ensure the downspout is completely clear of debris.</li>
<li><strong>Prepare Rope:</strong> Get a piece of synthetic rope (nylon, polypropylene) that will fit loosely down the downspout. Tie a knot at one end.</li>
<li><strong>Apply Caulk:</strong> Apply a generous dollop of exterior-grade gutter sealant or silicone caulk around the knot.</li>
<li><strong>Insert Rope:</strong> Gently lower the rope down the downspout from the top, allowing the caulk to spread around the top of the downspout opening. The caulk will adhere the rope to the inside of the downspout, creating a surface for water to cling to as it flows, reducing free-fall noise.</li>
<li><strong>Let Cure:</strong> Allow the caulk to cure completely before the next rainfall.</li>
</ol>
</li>
<li>
<p><strong>How to do it (Sponge for Downspouts):</strong></p>
<ol>
<li><strong>Get a Sponge:</strong> Find a durable, synthetic sponge that will fit snugly (but not too tightly) into the top of your downspout.</li>
<li><strong>Trim if Needed:</strong> Trim the sponge if it&rsquo;s too large or too small.</li>
<li><strong>Insert:</strong> Push the sponge a few inches down into the downspout opening from the top. It should create a baffle that slows water entry and dampens sound without blocking flow.</li>
<li><strong>Monitor:</strong> Check it periodically for debris accumulation.</li>
</ol>
</li>
<li>
<p><strong>How to do it (Sponge for Gutters - to reduce splashing):</strong></p>
<ol>
<li><strong>Identify Pooling:</strong> If a gutter section pools water, mark the exact lowest point.</li>
<li><strong>Place Sponge:</strong> Cut a small, durable outdoor sponge (e.g., a dishwashing sponge) and place it directly at the lowest point where water usually pools. The sponge will absorb some water and reduce the splash noise from incoming rain.</li>
<li><strong>Monitor:</strong> Ensure the sponge doesn&rsquo;t become a debris trap or block flow entirely.</li>
</ol>
</li>
<li>
<p><strong>Result:</strong> These methods disrupt the free fall of water, reducing drumming, splashing, and gurgling noises significantly.</p>
</li>
</ul>
<hr>
<h2 id="diy-method-rain-chain-for-specific-downspouts">DIY Method: Rain Chain (for specific downspouts)<a hidden class="anchor" aria-hidden="true" href="#diy-method-rain-chain-for-specific-downspouts">¶</a></h2>
<p>While a full downspout replacement, a rain chain can be a quieter alternative in the right context.</p>
<ul>
<li><strong>Why it helps:</strong> Unlike the enclosed downspout, water flows <em>over</em> the cups or links of a rain chain, creating a more gentle, tinkling sound rather than a loud rush or drum.</li>
<li><strong>How to do it:</strong>
<ol>
<li><strong>Assess Suitability:</strong> Rain chains are best for roof sections with smaller drainage areas or where aesthetic appeal is prioritized over maximum water diversion. They are not ideal for very heavy rainfall as they can splash significantly.</li>
<li><strong>Purchase/Install:</strong> Remove the existing noisy downspout. Install a rain chain according to manufacturer instructions, typically by attaching it to the gutter&rsquo;s downspout outlet.</li>
<li><strong>Ground Drainage:</strong> Ensure the rain chain deposits water into a well-drained area, a rain barrel, or a French drain to prevent foundation issues from splashing.</li>
</ol>
</li>
<li><strong>Result:</strong> A decorative and potentially quieter water flow, but with potential limitations regarding water management effectiveness.</li>
</ul>
<hr>
<h2 id="diy-method-sponge-for-noise-dampening-on-metal-on-metal-or-metal-on-wood">DIY Method: Sponge (for noise dampening on metal-on-metal or metal-on-wood)<a hidden class="anchor" aria-hidden="true" href="#diy-method-sponge-for-noise-dampening-on-metal-on-metal-or-metal-on-wood">¶</a></h2>
<p>Beyond downspouts, sponges or rubber strips can dampen vibrations in other areas.</p>
<ul>
<li><strong>Why it helps:</strong> Metal expanding and contracting, or simply vibrating against the fascia board or another metal component, can create irritating sounds.</li>
<li><strong>How to do it:</strong>
<ol>
<li><strong>Locate Source:</strong> Identify exactly where the metal-on-metal or metal-on-wood contact is causing noise (e.g., where gutter meets fascia, or where downspout meets the wall and a strap is tight).</li>
<li><strong>Insert Dampening Material:</strong>
<ul>
<li><strong>Between Gutter and Fascia:</strong> If the gutter is rattling against the fascia, gently lift the gutter slightly (if possible and safe) and insert small strips of foam weatherstripping, dense rubber, or a thin piece of sponge between the back of the gutter and the fascia board.</li>
<li><strong>Under Downspout Straps:</strong> If downspout straps are causing rattling against the wall, loosen the strap, insert a small piece of rubber or sponge between the downspout and the wall, and then re-tighten the strap.</li>
</ul>
</li>
</ol>
</li>
<li><strong>Result:</strong> Reduces vibrations and rattling caused by direct contact or minor movements.</li>
</ul>
<hr>
<h2 id="replace-your-gutter-entirely">Replace Your Gutter Entirely<a hidden class="anchor" aria-hidden="true" href="#replace-your-gutter-entirely">¶</a></h2>
<p>Sometimes, individual fixes aren&rsquo;t enough, and a system-wide problem necessitates a full replacement.</p>
<ul>
<li><strong>Why it might be necessary:</strong>
<ul>
<li><strong>Improper Pitch:</strong> If the entire gutter system was installed with an incorrect pitch (too flat or even sloping away from the downspout) and is severely sagging in multiple places, individual adjustments might be futile or temporary.</li>
<li><strong>Under-Sized Gutters/Downspouts:</strong> If your gutters consistently overflow or gush loudly due to sheer volume of water (despite being clean), they might be too small for your roof&rsquo;s drainage area or local rainfall intensity.</li>
<li><strong>Extensive Damage/Age:</strong> If gutters are very old, corroded, extensively cracked, or warped, their structural integrity is compromised, and new noises might be a symptom of a failing system.</li>
<li><strong>Seamless Gutters:</strong> If you currently have sectional gutters and their numerous seams are constantly leaking and noisy, upgrading to seamless gutters (professionally installed) can drastically reduce noise and maintenance.</li>
</ul>
</li>
<li><strong>Considerations:</strong> This is the most expensive option, but it offers a fresh start and the opportunity to install a perfectly sized, pitched, and quiet system.</li>
<li><strong>Professional Help:</strong> Gutter replacement (especially seamless) is typically a job for professionals. They can assess your roof&rsquo;s drainage needs, calculate proper sizing, and ensure correct installation for optimal performance and quiet operation.</li>
</ul>
<hr>
<h2 id="final-thoughts">Final Thoughts<a hidden class="anchor" aria-hidden="true" href="#final-thoughts">¶</a></h2>
<p>Noisy gutters and downspouts are more than just an annoyance; they can be indicators of underlying issues that could lead to water damage if left unaddressed. Starting with simple DIY methods like tightening loose fixtures and using sound-dampening tricks can often resolve common noise complaints. However, don&rsquo;t ignore persistent or severe noise, as it might signal a deeper problem with your gutter system&rsquo;s design, installation, or age.</p>
<p>Regular gutter cleaning and maintenance are the best preventative measures against noise and damage. By keeping your gutters clear and ensuring all components are secure, you can enjoy the peaceful sound of rain, rather than the disruptive racket of a struggling drainage system. If DIY solutions don&rsquo;t bring the desired peace, consulting a gutter professional is a wise investment for a quieter, drier home.</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/guide-to-preventing-overflowing-gutters/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>Guide to Preventing Overflowing Gutters</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/gutter-alternatives/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>Gutter Alternatives</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span style="display: inline-block; margin-left: 1em; font-size: 18px;">
    We may earn a commission when you click and buy from Amazon.com.
  <span style="display: inline-block; margin-left: 1em;">
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
