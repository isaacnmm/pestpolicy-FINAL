<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
 
<title>How to Get Rid Of Roof Rats in Attic | Pest Policy</title>
<meta name="keywords" content="
   guide, rid, roof">


<meta name="description" content="Have you recently discovered some activity in your attic and are afraid that it could be">

<meta name="author" content="Isaac">
<link rel="canonical" href="http://localhost:1313/posts/how-to-get-rid-of-roof-rats-in-attic/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.24117e94f7185554bf370e131546657a05d72834bf02c67c2a4215d5cf110a80.css" integrity="sha256-JBF&#43;lPcYVVS/Nw4TFUZlegXXKDS/AsZ8KkIV1c8RCoA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/how-to-get-rid-of-roof-rats-in-attic/">

 
<meta name="twitter:title" content="How to Get Rid Of Roof Rats in Attic | Pest Policy" />


<meta name="twitter:description" content="Have you recently discovered some activity in your attic and are afraid that it could be" />
<meta property="og:title" content="How to Get Rid Of Roof Rats in Attic | Pest Policy" />
<meta property="og:description" content="Have you recently discovered some activity in your attic and are afraid that it could be" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/how-to-get-rid-of-roof-rats-in-attic/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-07-10T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2025-07-10T00:00:00&#43;03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "How to Get Rid Of Roof Rats in Attic",
      "item": "http://localhost:1313/posts/how-to-get-rid-of-roof-rats-in-attic/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How to Get Rid Of Roof Rats in Attic | Pest Policy",
  "name": "How to Get Rid Of Roof Rats in Attic",
  "description": "Have you recently discovered some activity in your attic and are afraid that it could be",
  "keywords": [
    "guide", "rid", "roof"
  ],
  "wordCount" : "1548",
  "inLanguage": "en",
  "datePublished": "2025-07-10T00:00:00Z",
  "dateModified": "2025-07-10T00:00:00+03:00",
  "author":{
    "@type": "Person",
    "name": "Isaac"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/how-to-get-rid-of-roof-rats-in-attic/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pest Policy",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
   
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369419631229178"
     crossorigin="anonymous"></script>
</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pest Policy (Alt + H)">Pest Policy</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Blog" class="active"
                >Blog
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact"
                >Contact
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">How to Get Rid Of Roof Rats in Attic</h1>
    <div class="post-description">Have you recently discovered some activity in your attic and are afraid that it could be</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>July 10, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="http://localhost:1313/tags/guide/">Guide</a><a href="http://localhost:1313/tags/rid/">Rid</a><a href="http://localhost:1313/tags/roof/">Roof</a></span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>Have you recently discovered some activity in your attic and are afraid that it could be
<a href="https://en.wikipedia.org/wiki/Black_rat">roof rats or black rats</a>
? While it can be a worrying thought, it is not uncommon for rats to inhabit less populated areas of a house.</p>
<p>Attics provide an ideal location for rats looking for a warm, dark and quiet space where they can mate and reproduce safely.</p>
<p>But once they make themselves comfortable in your attic, roof rats can cause a variety of problems for your family and damage your property significantly.</p>
<p>If you dont get <a href="/posts/how-to-get-rid-of-brown-recluse-spiders/">rid</a> of roof rats in the attic immediately, it could result in costly repairs and an unmatched amount of frustration. So read on to find all the ways you can use to make the roof rats vacate your attic!</p>
<p>Related:
<a href="https://pestpolicy.com/do-moles-have-eyes/">Do Moles Have Eyes? Can Moles See?</a></p>
<h2 id="how-to-identify-the-roof-rats">How to Identify the Roof Rats<a hidden class="anchor" aria-hidden="true" href="#how-to-identify-the-roof-rats">¶</a></h2>
<p>Getting rid of roof rats in the attic will not be possible if you have no clue what they look like or how they behave.</p>
<p>You dont have to worry too much about this because their unique features and appearance makes them stand out.</p>
<h3 id="1-features--appearance">1. Features &amp; Appearance<a hidden class="anchor" aria-hidden="true" href="#1-features--appearance">¶</a></h3>
<p>With a weight of around 75  230 grams, an average roof rat measures 12.75 to 18.25 cm in length. Roof rats are commonly known as black rats, but their fur coat color varies from light brown to black depending on the species.</p>
<p>In terms of size, black roof rats are usually smaller than the brown ones. Their eyesight is very weak and so they navigate with the help of their odor.</p>
<h3 id="2-behavior--habits">2. Behavior &amp; Habits<a hidden class="anchor" aria-hidden="true" href="#2-behavior--habits">¶</a></h3>
<p>Unlike other rodents, roof rats are not very sociable and take a long time to get used to a new place. Hence, once they settle in your attic, roof rats will take a long time to leave on their own.</p>
<p>They also dont like experimenting too much which is why a roof rats in the attic will stick to their scavenging paths.</p>
<h3 id="3-diet">3. Diet<a hidden class="anchor" aria-hidden="true" href="#3-diet">¶</a></h3>
<p>Roof rats are omnivores who love to feed on food meant for other cattle or pets. Their water intake is usually 15 milliliters while their food intake is 15 grams.</p>
<p>Like squirrels, they feed on nuts and fruits as well and find natural habitats with vegetation to be great places to live.</p>
<h3 id="4-reproduction">4. Reproduction<a hidden class="anchor" aria-hidden="true" href="#4-reproduction">¶</a></h3>
<p>The breeding season varies for roof rats depending on weather conditions but they breed all year regardless. When a female roof rat in the attic conceives, she may give birth to a litter of 5-8 roof rats within 21-23 days.</p>
<p>Related:
Best Mole Traps
9 Best Raccoon Traps</p>
<h2 id="inspect-your-house-for-infestation-signs">Inspect Your House for Infestation Signs<a hidden class="anchor" aria-hidden="true" href="#inspect-your-house-for-infestation-signs">¶</a></h2>
<p>Now that you know how to identify a roof rat, look out for visible signs of its presence in your house. Some major signs to inspect to get rid of roof rats in the attic include:</p>
<h3 id="1-rat-droppings-everywhere">1. Rat Droppings Everywhere<a hidden class="anchor" aria-hidden="true" href="#1-rat-droppings-everywhere">¶</a></h3>
<p>These are the most common markers of a roof rats presence. Different from droppings of other rodents, a roof rats droppings are usually 0.5 inches long with pointed ends, brown and tapered.</p>
<h3 id="2-foot-and-tail-marks">2. Foot and Tail Marks<a hidden class="anchor" aria-hidden="true" href="#2-foot-and-tail-marks">¶</a></h3>
<p>To get rid of roof rats in the attic, you should be able to track the rats by the greasy marks they leave behind. These oily marks are a result of the greasy substance secreted from their bodies. If your attic is dusty, you can also trace their footprints and tail marks to figure out their activity.</p>
<h3 id="3-gnawing-holes">3. Gnawing Holes<a hidden class="anchor" aria-hidden="true" href="#3-gnawing-holes">¶</a></h3>
<p>If you can spot deep holes dug in the flooring of your attic, the groud or your walls, it is a clear sign that roof rats are present. They use these holes to preserve their food, protect themselves from predators and to nest.</p>
<h3 id="4-unpleasant-odors">4. Unpleasant Odors<a hidden class="anchor" aria-hidden="true" href="#4-unpleasant-odors">¶</a></h3>
<p>Roof rats produce an abundance of droppings which will make your attic have an unpleasant smell. They also leave urine marks wherever they go because its odor guides them. This adds to the irritating and horrid smell which can be found around or near all areas infested with roof rats.</p>
<h3 id="5-hissing-sounds">5. Hissing Sounds<a hidden class="anchor" aria-hidden="true" href="#5-hissing-sounds">¶</a></h3>
<p>Roof rats in the attic will travel to other parts of your house for food. Because this movement normally takes place at night, you can hear rat squeaks and hissing when its quiet.</p>
<h2 id="5-ways-to-deal-with-roof-rats">5 Ways to Deal with Roof Rats<a hidden class="anchor" aria-hidden="true" href="#5-ways-to-deal-with-roof-rats">¶</a></h2>
<p>Once you are sure that roof rats have inhabited your attic, we suggest that you take action to get rid of roof rats in the attic! The following are some of the most effective ways of dealing with the issue.</p>
<h3 id="1-clean-up">**1. **<strong>Clean Up</strong><a hidden class="anchor" aria-hidden="true" href="#1-clean-up">¶</a></h3>
<p>Roof rats move around primarily based on their urine marks and hide in places that are dark and have some food supply. Make sure that you keep your attic and house clean so that these roof rats can be detracted. This will leave little room for roof rats to move around and they will eventually be restricted to one area. As you clean, use disinfectants to ensure a healthy environment for your family.</p>
<h3 id="2-baiting--trapping-">**2. ****Baiting &amp; Trapping **<a hidden class="anchor" aria-hidden="true" href="#2-baiting--trapping-">¶</a></h3>
<p>This is the most traditional way of getting rid of roof rats in the attic because the right kind of baits can easily lure the rats into a trap. Unlike other rats, roof rats are attracted to bait such as:</p>
<ul>
<li>Cried fruits and nuts</li>
<li>Berries and peanut butter</li>
<li>Insects and snail shells</li>
<li>Dental floss or other nesting material
You may also use chemically treated poisonous baits that kill the roof rats and you can get rid of them permanently.</li>
</ul>
<p>When you use bait to lure a rat, make sure to place it along with a trap in an area with rat activity because roof rats can detect any unusual placement of food and stay away from the bait. Dont forget to check on the traps so that you can timely dispose of any dead rats.</p>
<p>Related:
<a href="https://pestpolicy.com/best-raccoon-traps/">Best Raccoon Traps</a></p>
<h3 id="3-non-toxic-trapping">3. Non-Toxic Trapping<a hidden class="anchor" aria-hidden="true" href="#3-non-toxic-trapping">¶</a></h3>
<p>Setting the right bait doesnt guarantee that youll get rid of roof rats in the attic</p>
<ul>
<li>unless you use the right kind of trap. *
*You can find various types and sizes of traps in the market that dont require you to poison the *
roof rats in your attic. Based on the kind of trap you opt for, the rat can be caught without even being harmed.</li>
</ul>
<p>Some of the more common traps are:</p>
<h4 id="--snap-traps">*- *<em>Snap Traps</em><a hidden class="anchor" aria-hidden="true" href="#--snap-traps">¶</a></h4>
<p>These conventional traps have a metal bar that snaps down when it catches a rat. They are extremely effective in getting rid of roof rats in the attic, but it is difficult to set them up and each trap only tends to kill one.</p>
<p>These may not be ideal to use if you have children or pets at home because snap traps shut with tremendous force and can cause injury in case an accident occurs.</p>
<h4 id="--electronic-traps">*- *<em>Electronic Traps</em><a hidden class="anchor" aria-hidden="true" href="#--electronic-traps">¶</a></h4>
<p>Easy to bait and set, these traps use a high voltage shock to kill a rat. This trap is a non-toxic way of killing a rat and comes with a design that is reusable and allows the trap to be safely used around kids.</p>
<h4 id="--glue-traps">*- *<em>Glue Traps</em><a hidden class="anchor" aria-hidden="true" href="#--glue-traps">¶</a></h4>
<p>If you have recognized the track of a roof rat, chances are that it will take the same route next time. This is when you can easily use a glue trap.</p>
<p>These traps are convenient and easy to use because they dont require any baiting or setting. Instead, they have a glue formula that prevents the rats from escaping and holds it securely in place until you decide to discard it.</p>
<h3 id="4-block-the-entry-points">4. Block the Entry Points<a hidden class="anchor" aria-hidden="true" href="#4-block-the-entry-points">¶</a></h3>
<p>While you make efforts to get rid of roof rats in the attic, dont forget to block all the entry passages to discourage the roof rats from entering the attic.</p>
<p>This will not only help you catch the ones inside the attic but also prevent other rats from entering. You may block the passages by spraying or keeping repellant agents near the entry points or covering holes with material that cant be chewed such as steel wool.� Some of the more likely entry passages are:</p>
<ul>
<li>Gaps in shingles</li>
<li>Vent covers that are damaged</li>
<li>Cracks</li>
<li>Holes in the walls or ceilings</li>
</ul>
<h3 id="5-use-natural-predators">5. Use Natural Predators<a hidden class="anchor" aria-hidden="true" href="#5-use-natural-predators">¶</a></h3>
<p>Another way to get rid of roof rats in the attic is to smartly utilize employ natural predators of roof rats such as cats, dogs, and even snakes.</p>
<p>Cats are usually the best option due to their agility and flexibility that enables them to reach out to places like the attic, where other predators cant reach easily.</p>
<p>But know that this may not be the best way to get rid of roof rats in the attic because some predators may ignore the roof rats and may even end up sharing food with them.</p>
<h2 id="final-thoughts">Final Thoughts!<a hidden class="anchor" aria-hidden="true" href="#final-thoughts">¶</a></h2>
<p>If there is a huge population of roof rats in your attic, you should consult a professional pest control company to help you out.</p>
<p>Getting rid of roof rats in the attic is a time-consuming process but dont forget that all your efforts will eventually bring back the comforts of your home.</p>
<h2 id="sources">Sources:<a hidden class="anchor" aria-hidden="true" href="#sources">¶</a></h2>
<ol>
<li><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2870913/">The role of roof rats (Rattus rattus) in the spread &hellip; - NCBI - NIH</a></li>
<li><a href="http://ipm.ucanr.edu/PMG/PESTNOTES/pn74106.html">Rat Management Guidelines&ndash;UC IPM</a></li>
<li><a href="https://www.ncbi.nlm.nih.gov/pubmed/24443051">Effectiveness of rodenticides for managing invasive roof rats</a></li>
<li><a href="https://www.sccgov.org/sites/vector/resources/brochures/Documents/Roof%20Rats.pdf">About Roof Rats - the County of Santa Clara</a></li>
</ol>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/how-to-get-rid-of-raccoons/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>How to Get Rid Of Raccoons</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/how-to-get-rid-of-sand-fleas/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>How to Get Rid Of Sand Fleas</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span style="display: inline-block; margin-left: 1em; font-size: 18px;">
    We may earn a commission when you click and buy from Amazon.com.
  <span style="display: inline-block; margin-left: 1em;">
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
