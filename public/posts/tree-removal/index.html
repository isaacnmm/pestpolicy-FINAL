<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
 
<title>Tree Removal | Pest Policy</title>
<meta name="keywords" content="
   guides, tree, removal">


<meta name="description" content="While trees are invaluable assets to our landscapes, providing shade, beauty, and environmental benefits, there comes a time when removing a tree becomes n...">

<meta name="author" content="Isaac">
<link rel="canonical" href="http://localhost:1313/posts/tree-removal/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.24117e94f7185554bf370e131546657a05d72834bf02c67c2a4215d5cf110a80.css" integrity="sha256-JBF&#43;lPcYVVS/Nw4TFUZlegXXKDS/AsZ8KkIV1c8RCoA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/tree-removal/">

 
<meta name="twitter:title" content="Tree Removal | Pest Policy" />


<meta name="twitter:description" content="While trees are invaluable assets to our landscapes, providing shade, beauty, and environmental benefits, there comes a time when removing a tree becomes n..." />
<meta property="og:title" content="Tree Removal | Pest Policy" />
<meta property="og:description" content="While trees are invaluable assets to our landscapes, providing shade, beauty, and environmental benefits, there comes a time when removing a tree becomes n..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/tree-removal/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-07-10T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2025-07-10T00:00:00&#43;03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Tree Removal",
      "item": "http://localhost:1313/posts/tree-removal/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Tree Removal | Pest Policy",
  "name": "Tree Removal",
  "description": "While trees are invaluable assets to our landscapes, providing shade, beauty, and environmental benefits, there comes a time when removing a tree becomes n...",
  "keywords": [
    "guides", "tree", "removal"
  ],
  "wordCount" : "1412",
  "inLanguage": "en",
  "datePublished": "2025-07-10T00:00:00Z",
  "dateModified": "2025-07-10T00:00:00+03:00",
  "author":{
    "@type": "Person",
    "name": "Isaac"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/tree-removal/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pest Policy",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
   
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369419631229178"
     crossorigin="anonymous"></script>
</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pest Policy (Alt + H)">Pest Policy</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Blog" class="active"
                >Blog
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact"
                >Contact
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Tree Removal</h1>
    <div class="post-description">While trees are invaluable assets to our landscapes, providing shade, beauty, and environmental benefits, there comes a time when removing a tree becomes n...</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>July 10, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="http://localhost:1313/tags/guides/">Guides</a><a href="http://localhost:1313/tags/tree/">Tree</a><a href="http://localhost:1313/tags/removal/">Removal</a></span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>While trees are invaluable assets to our landscapes, providing shade, beauty, and environmental benefits, there comes a time when removing a <a href="/posts/10-trees-to-grow-in-containers/">tree</a> becomes necessary. This decision is often difficult, as it marks the end of a living element that may have graced your property for decades. However, a hazardous or unhealthy tree can pose significant risks to people, property, and even other plants.</p>
<p>Tree removal is a task that ranges from a manageable DIY project for small specimens to an extremely dangerous operation requiring professional expertise for larger trees. Understanding when removal is truly needed, local regulations, and the safest methods for execution are paramount. This guide will help you navigate the process of tree removal, ensuring safety and responsible landscape management.</p>
<h2 id="when-do-i-need-to-remove-a-tree">When Do I Need To Remove a Tree?<a hidden class="anchor" aria-hidden="true" href="#when-do-i-need-to-remove-a-tree">¶</a></h2>
<p>Deciding to remove a tree is a significant step. Here are the primary reasons why tree removal might be necessary:</p>
<ol>
<li>
<p><strong>Hazardous or Unsafe:</strong></p>
<ul>
<li><strong>Dead or Dying:</strong> A tree that is visibly dead or in severe decline (e.g., no leaves in spring, extensive dead branches, fungal growth indicating rot) is structurally weak and prone to falling.</li>
<li><strong>Compromised Structure:</strong> Large cracks or splits in the trunk, major scaffold limbs, or at branch unions. Significant rot or decay, especially at the base or in major branches.</li>
<li><strong>Weakened Root System:</strong> Heaving soil around the base, extensive root rot, or roots damaged by construction can compromise stability.</li>
<li><strong>Severe Leaning:</strong> A significant, increasing lean, especially after a storm, could indicate root failure.</li>
<li><strong>Proximity to Structures:</strong> If a large tree poses an immediate threat to a house, garage, power lines, or other critical infrastructure due to its condition or location.</li>
<li><strong>Storm Damage:</strong> Trees severely damaged by storms (large broken limbs, split trunks, uprooted) may be beyond saving and pose an ongoing hazard.</li>
</ul>
</li>
<li>
<p><strong>Disease or Pest Infestation:</strong></p>
<ul>
<li>If a tree is infected with a serious, untreatable disease (e.g., Dutch Elm Disease, Emerald Ash Borer infestation) that could spread to other trees or is causing irreversible decline. Early removal can protect other susceptible trees.</li>
</ul>
</li>
<li>
<p><strong>Interfering with Construction or Landscape Plans:</strong></p>
<ul>
<li>When a tree&rsquo;s location directly impedes new construction, a renovation, or planned landscaping that cannot be adapted.</li>
<li>Roots interfering with foundations, underground pipes, or pavements.</li>
</ul>
</li>
<li>
<p><strong>Overcrowding or Poor Spacing:</strong></p>
<ul>
<li>To improve the health and growth of other, more desirable trees by reducing competition for light, water, and nutrients.</li>
<li>To allow more sunlight into parts of the garden.</li>
</ul>
</li>
<li>
<p><strong>Non-Native or Invasive Species:</strong></p>
<ul>
<li>Removing invasive trees can help restore ecological balance and prevent them from outcompeting native vegetation.</li>
</ul>
</li>
</ol>
<h2 id="check-the-local-regulations">Check the Local Regulations<a hidden class="anchor" aria-hidden="true" href="#check-the-local-regulations">¶</a></h2>
<p>Before grabbing any tools, it is <strong>imperative</strong> to check your local municipal or county regulations regarding tree removal. Many areas have ordinances in place to protect trees, especially mature ones.</p>
<ul>
<li><strong>Tree Protection Ordinances:</strong> Some cities or counties require permits for removing trees above a certain size or in specific zones (e.g., near waterways, conservation areas).</li>
<li><strong>Heritage or Protected Trees:</strong> Specific trees might be designated as &ldquo;heritage&rdquo; or &ldquo;protected&rdquo; and cannot be removed without special permission, regardless of their condition.</li>
<li><strong>Tree Removal Permits:</strong> You may need to apply for a permit, which often involves an inspection by a municipal arborist or urban forester.</li>
<li><strong>Homeowners Association (HOA) Rules:</strong> If you live in an HOA, there may be additional rules or approvals required for tree removal.</li>
</ul>
<p><strong>Consequences of Non-Compliance:</strong> Removing a tree without the necessary permits can result in hefty fines and requirements to replant multiple trees. Always confirm local regulations first. In Kenya, local county governments (e.g., Nairobi City County) might have by-laws regarding tree felling, especially for larger, mature trees in urban areas. Check with your county&rsquo;s environment or planning department.</p>
<h2 id="diy-removing-small-trees-yourself">DIY: Removing Small Trees Yourself<a hidden class="anchor" aria-hidden="true" href="#diy-removing-small-trees-yourself">¶</a></h2>
<p>Removing small trees (typically those less than 6 meters / 20 feet tall, with a trunk diameter of less than 15-20 cm / 6-8 inches at chest height) can be a DIY project for those comfortable with power tools and safety procedures.</p>
<p><strong>Safety Gear is Non-Negotiable:</strong></p>
<ul>
<li>Helmet (preferably with a face shield)</li>
<li>Safety glasses</li>
<li>Hearing protection</li>
<li>Heavy-duty gloves</li>
<li>Steel-toed boots</li>
<li>Long sleeves and pants</li>
</ul>
<p><strong>Tools You Might Need:</strong></p>
<ul>
<li>Chainsaw (properly maintained and sharp)</li>
<li>Hand saw or pole saw for higher branches</li>
<li>Loppers and pruners for smaller branches</li>
<li>Wedges (plastic or aluminum)</li>
<li>Sledgehammer</li>
<li>Rope and pulley system (for guiding fall direction)</li>
<li>Ladder (only for very specific, stable tasks, generally avoid for tree felling)</li>
</ul>
<p><strong>Steps for Small Tree Removal (Simplified):</strong></p>
<ol>
<li><strong>Plan the Fall Direction:</strong> Determine the safest direction for the tree to fall. Consider obstacles (structures, fences, power lines), lean of the tree, wind direction, and escape routes.</li>
<li><strong>Clear the Area:</strong> Remove all debris, people, pets, and valuables from the fall zone.</li>
<li><strong>Establish Escape Routes:</strong> Plan two clear escape routes at a 45-degree angle away from the planned fall direction, behind the tree.</li>
<li><strong>Prune Lower Branches:</strong> Clear branches up to chest height to give you working room.</li>
<li><strong>Make the Notch (Directional Cut):</strong> On the side of the tree facing the desired fall direction, make a horizontal cut (the &ldquo;face cut&rdquo; or &ldquo;hinge cut&rdquo;) about one-third of the way into the trunk. Then, make a downward angled cut that meets the end of the first cut, forming a wedge.</li>
<li><strong>Make the Back Cut (Felling Cut):</strong> On the opposite side of the tree, slightly above the hinge cut, make a horizontal cut towards the notch. As you cut, watch the hinge. Once the tree begins to fall, immediately move along your escape route.</li>
<li><strong>Limb and Buck:</strong> Once the tree is down, safely remove the branches (&ldquo;limbing&rdquo;) and cut the trunk into manageable sections (&ldquo;bucking&rdquo;) for disposal or firewood.</li>
<li><strong>Stump Removal:</strong> Decide whether to grind the stump, chemically treat it to promote decay, or leave it.</li>
</ol>
<p><strong>WARNING:</strong> Even small trees can be dangerous. Misjudging the fall, improper cuts, or equipment malfunction can lead to severe injury or property damage. If you have any doubt, hire a professional.</p>
<h2 id="hiring-professionals-for-large-trees">Hiring Professionals for Large Trees<a hidden class="anchor" aria-hidden="true" href="#hiring-professionals-for-large-trees">¶</a></h2>
<p>For large trees (over 6-7 meters / 20-25 feet tall, or those with significant hazards), hiring a certified arborist is not just recommended, it&rsquo;s <strong>essential</strong>.</p>
<p><strong>Reasons to Hire a Professional:</strong></p>
<ul>
<li><strong>Safety:</strong> They have the training, experience, and specialized equipment (cranes, lifts, rigging) to safely remove large, hazardous trees, especially in tight spaces or near power lines.</li>
<li><strong>Expertise:</strong> Arborists understand tree biology, structural integrity, and proper cutting techniques to minimize damage and ensure safety.</li>
<li><strong>Insurance:</strong> Reputable arborists carry significant liability insurance and worker&rsquo;s compensation, protecting you from financial responsibility if an accident occurs on your property.</li>
<li><strong>Equipment:</strong> They have the tools for efficient and safe removal, chipping, and stump grinding.</li>
<li><strong>Regulatory Compliance:</strong> They are typically knowledgeable about local tree ordinances and permits.</li>
</ul>
<p><strong>What to Look for When Hiring:</strong></p>
<ul>
<li><strong>Certifications:</strong> ISA Certified Arborists are trained to industry standards.</li>
<li><strong>Insurance:</strong> Always ask for proof of current liability and worker&rsquo;s compensation insurance. Call their insurer to verify.</li>
<li><strong>References &amp; Reviews:</strong> Check online reviews and ask for local references.</li>
<li><strong>Written Estimate:</strong> Get a detailed quote that specifies all work to be done (e.g., felling, limbing, chipping, stump grinding, cleanup) and the total cost.</li>
<li><strong>Avoid Pressure Sales:</strong> Be wary of high-pressure tactics or contractors who demand cash up front.</li>
</ul>
<h2 id="aftercare-and-landscape-restoration">Aftercare and Landscape Restoration<a hidden class="anchor" aria-hidden="true" href="#aftercare-and-landscape-restoration">¶</a></h2>
<p>Once the tree is removed, the work isn&rsquo;t entirely done.</p>
<ol>
<li><strong>Stump Removal:</strong>
<ul>
<li><strong>Stump Grinding:</strong> This is the most common method. A stump grinder pulverizes the stump down to below ground level. The resulting wood chips can be used as mulch or removed.</li>
<li><strong>Chemical Treatment:</strong> Apply a stump killer product to accelerate decay, but this is a slower process.</li>
<li><strong>Leave It:</strong> For out-of-the-way areas, you might choose to leave the stump to decompose naturally, which can take many years.</li>
</ul>
</li>
<li><strong>Site Cleanup:</strong> Ensure all wood, branches, sawdust, and debris are thoroughly removed from the area.</li>
<li><strong>Soil Restoration:</strong> If the stump was ground, fill the hole with fresh topsoil and compost to prepare for new planting.</li>
<li><strong>Replanting:</strong> Consider planting a new tree in a more appropriate location, or rethink your landscape design for the newly opened space. Choose species suitable for your climate and soil, and consider their mature size and root systems to avoid future problems.</li>
</ol>
<h2 id="final-thoughts">Final Thoughts<a hidden class="anchor" aria-hidden="true" href="#final-thoughts">¶</a></h2>
<p>Tree removal is a serious task that should never be taken lightly. While small, non-hazardous trees might be manageable for experienced DIYers, the inherent risks associated with falling timber, chainsaws, and working at height make professional intervention the safest and most effective choice for most tree removal projects. By understanding when removal is necessary, respecting local regulations, and employing qualified professionals, you can ensure the safety of your property and the long-term health of your landscape.</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/trampoline-storage-ideas/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>Trampoline Storage Ideas</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/tree-removal-cost/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>Tree Removal Cost</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span style="display: inline-block; margin-left: 1em; font-size: 18px;">
    We may earn a commission when you click and buy from Amazon.com.
  <span style="display: inline-block; margin-left: 1em;">
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
