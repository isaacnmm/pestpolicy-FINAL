<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
 
<title>How to Remove Rust Using Electrolysis | Pest Policy</title>
<meta name="keywords" content="
   diy, rust, using">


<meta name="description" content="Rust, the common enemy of all ferrous metals, can quickly degrade the appearance and structural integrity of tools, automotive parts, and various metal obj...">

<meta name="author" content="Isaac">
<link rel="canonical" href="http://localhost:1313/posts/how-to-remove-rust-using-electrolysis/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.24117e94f7185554bf370e131546657a05d72834bf02c67c2a4215d5cf110a80.css" integrity="sha256-JBF&#43;lPcYVVS/Nw4TFUZlegXXKDS/AsZ8KkIV1c8RCoA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/how-to-remove-rust-using-electrolysis/">

 
<meta name="twitter:title" content="How to Remove Rust Using Electrolysis | Pest Policy" />


<meta name="twitter:description" content="Rust, the common enemy of all ferrous metals, can quickly degrade the appearance and structural integrity of tools, automotive parts, and various metal obj..." />
<meta property="og:title" content="How to Remove Rust Using Electrolysis | Pest Policy" />
<meta property="og:description" content="Rust, the common enemy of all ferrous metals, can quickly degrade the appearance and structural integrity of tools, automotive parts, and various metal obj..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/how-to-remove-rust-using-electrolysis/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-07-10T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2025-07-10T00:00:00&#43;03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "How to Remove Rust Using Electrolysis",
      "item": "http://localhost:1313/posts/how-to-remove-rust-using-electrolysis/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How to Remove Rust Using Electrolysis | Pest Policy",
  "name": "How to Remove Rust Using Electrolysis",
  "description": "Rust, the common enemy of all ferrous metals, can quickly degrade the appearance and structural integrity of tools, automotive parts, and various metal obj...",
  "keywords": [
    "diy", "rust", "using"
  ],
  "wordCount" : "1720",
  "inLanguage": "en",
  "datePublished": "2025-07-10T00:00:00Z",
  "dateModified": "2025-07-10T00:00:00+03:00",
  "author":{
    "@type": "Person",
    "name": "Isaac"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/how-to-remove-rust-using-electrolysis/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pest Policy",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
   
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369419631229178"
     crossorigin="anonymous"></script>
</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pest Policy (Alt + H)">Pest Policy</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Blog" class="active"
                >Blog
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact"
                >Contact
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">How to Remove Rust Using Electrolysis</h1>
    <div class="post-description">Rust, the common enemy of all ferrous metals, can quickly degrade the appearance and structural integrity of tools, automotive parts, and various metal obj...</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>July 10, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="http://localhost:1313/tags/diy/">Diy</a><a href="http://localhost:1313/tags/rust/">Rust</a><a href="http://localhost:1313/tags/using/">Using</a></span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>Rust, the common enemy of all ferrous metals, can quickly degrade the appearance and structural integrity of tools, automotive parts, and various metal objects. While traditional methods like sanding, grinding, or chemical rust removers are effective for many applications, they often involve abrasive action that removes some of the base metal, or harsh chemicals that require careful handling and disposal. For delicate items, intricate parts, or simply a gentler, more thorough approach, electrolysis offers a compelling alternative.</p>
<p>Electrolysis is a chemical process that uses an electric current to reverse the oxidation that causes rust, effectively converting the rust back into a more stable, easily removable form, or even back to metallic iron. This method is non-destructive to the base metal, making it ideal for restoring valuable antiques, vintage tools, or any item where preserving the original surface is paramount. While it might sound like something out of a science fiction movie, setting up an electrolysis rust removal system is surprisingly straightforward and can be done safely with common household items or readily available components. This guide will demystify the process, explain the underlying science, outline the necessary safety precautions, and provide practical tips for achieving excellent results.</p>
<h2 id="how-electrolysis-works">How Electrolysis Works<a hidden class="anchor" aria-hidden="true" href="#how-electrolysis-works">¶</a></h2>
<p>At its core, electrolysis is an electrochemical process that uses direct current (DC) electricity to drive a non-spontaneous chemical reaction. In the context of rust removal, this means reversing the oxidation of iron (rust) back into its metallic form.</p>
<h3 id="the-science-behind-the-magic">The Science Behind the Magic<a hidden class="anchor" aria-hidden="true" href="#the-science-behind-the-magic">¶</a></h3>
<p>To understand how electrolysis removes rust, we need to grasp a few basic electrochemical principles:</p>
<ol>
<li>
<p><strong>The Setup (Electrolytic Cell):</strong> An electrolytic rust removal system, often called an &ldquo;e-tank,&rdquo; consists of:</p>
<ul>
<li><strong>A Container:</strong> A non-conductive vessel (usually plastic) large enough to submerge your rusty object.</li>
<li><strong>An Electrolyte:</strong> A conductive solution, typically water mixed with an ionic compound. The most common and safest choice is <strong>sodium carbonate (washing soda)</strong>, a mild alkali. This solution allows the electric current to flow. Avoid using table salt, as it can produce toxic chlorine gas.</li>
<li><strong>Two Electrodes:</strong>
<ul>
<li><strong>Cathode (Negative Electrode):</strong> This is the rusty object you want to clean. It&rsquo;s connected to the negative terminal of the DC power supply.</li>
<li><strong>Anode (Positive Electrode):</strong> This is a sacrificial piece of mild steel or iron (e.g., rebar, scrap steel). It&rsquo;s connected to the positive terminal of the DC power supply. <strong>Crucially, never use stainless steel for the anode</strong>, as it can release toxic hexavalent chromium into the solution.</li>
</ul>
</li>
<li><strong>A DC Power Supply:</strong> A common automotive battery charger is often used, providing 6V or 12V DC current. A regulated DC power supply with adjustable voltage and current is ideal but not strictly necessary for <a href="/posts/best-diy-lawn-care-programs-and-services/">DIY</a> setups.</li>
</ul>
</li>
<li>
<p><strong>The Process:</strong></p>
<ul>
<li>When the power supply is turned on, direct current flows from the positive terminal (anode) through the electrolyte to the negative terminal (cathode, your rusty object).</li>
<li><strong>At the Cathode (Rusty Object):</strong> The rusty object (iron oxide) receives electrons from the power supply. This causes a reduction reaction. The iron oxides (<a href="/posts/can-you-paint-over-rust/">rust</a>, primarily Fe2O3 and Fe3O4) are chemically reduced. Some of the rust is converted back into metallic iron that re-bonds to the surface, while other rust is transformed into a black, easily removable sludge (magnetite, Fe3O4) or simply loosens and flakes off due to the liberation of hydrogen gas at the surface. Hydrogen gas (H2) bubbles are clearly visible rising from the rusty object.</li>
<li><strong>At the Anode (Sacrificial Steel):</strong> The sacrificial steel anode gives up electrons to the power supply. This causes an oxidation reaction. The anode itself will begin to rust and deteriorate, attracting the iron particles from the rusty object and collecting the loosened rust sludge. Oxygen gas (O2) bubbles are produced at the anode.</li>
<li><strong>The Electrolyte&rsquo;s Role:</strong> The washing soda in the water doesn&rsquo;t get consumed in the reaction; it merely acts as a conductor, facilitating the flow of ions and maintaining an alkaline environment that favors the rust removal process and prevents the base metal from etching. Water molecules themselves are also split into hydrogen and oxygen gases during the process.</li>
</ul>
</li>
<li>
<p><strong>The Result:</strong> Over time, the rust on the object is systematically converted or loosened. Once removed from the bath, the treated item will typically be covered in a black, powdery residue (converted rust) that can be easily brushed off with a wire brush or scrub pad, revealing clean, rust-free metal underneath. Unlike abrasive methods, electrolysis does not remove any of the original metal, preserving fine details and tolerances.</p>
</li>
</ol>
<h3 id="key-factors-affecting-efficiency">Key Factors Affecting Efficiency:<a hidden class="anchor" aria-hidden="true" href="#key-factors-affecting-efficiency">¶</a></h3>
<ul>
<li><strong>Surface Area:</strong> The more surface area the anode has, and the closer it is to the rusty object (without touching), the more efficient the process. Ideally, anodes should surround the rusty object for even cleaning.</li>
<li><strong>Current (Amperage):</strong> Higher amperage generally leads to faster rust removal. Battery chargers often provide different amp settings.</li>
<li><strong>Electrolyte Strength:</strong> A sufficient concentration of washing soda ensures good conductivity. Too little will slow the process, too much doesn&rsquo;t significantly speed it up and just wastes material. A typical ratio is 1 tablespoon of washing soda per gallon of water.</li>
<li><strong>Temperature:</strong> While not typically controlled, a slightly warmer solution can increase reaction speed.</li>
<li><strong>Time:</strong> Depending on the severity of the rust and the size of the object, the process can take anywhere from a few hours to several days. Periodic inspection and scrubbing can accelerate the process.</li>
</ul>
<h2 id="safety-precautions">Safety Precautions<a hidden class="anchor" aria-hidden="true" href="#safety-precautions">¶</a></h2>
<p>While electrolysis rust removal is relatively safe compared to using strong acids, it involves electricity, water, and gas production, so <strong>strict adherence to safety precautions is paramount.</strong></p>
<ol>
<li>
<p><strong>Electrical Safety:</strong></p>
<ul>
<li><strong>GFCI Outlet:</strong> Always connect your battery charger to a Ground Fault Circuit Interrupter (GFCI) outlet. This device will instantly cut power if it detects a short circuit or ground fault, preventing electric shock.</li>
<li><strong>Keep Charger Dry:</strong> Ensure the battery charger and all electrical connections remain completely dry and away from the electrolyte solution.</li>
<li><strong>No Touching When Powered:</strong> Never touch the electrodes or the water in the tank when the power supply is on. Always unplug the charger before making any adjustments or removing the object. Even low voltages can cause a shock if your hands are wet and conductive.</li>
<li><strong>Proper Connections:</strong> Double-check that the positive lead connects to the anode (sacrificial steel) and the negative lead connects to the rusty object (cathode). Reversing polarity will cause your desired object to become the sacrificial anode and corrode.</li>
<li><strong>No Short Circuits:</strong> Ensure the anode and cathode (rusty object) never touch inside the tank. This will cause a short circuit and could damage your power supply or cause overheating. Use non-conductive materials (like wood, plastic, or string) to suspend the rusty object.</li>
</ul>
</li>
<li>
<p><strong>Ventilation and Fire Safety:</strong></p>
<ul>
<li><strong>Hydrogen Gas Production:</strong> The electrolysis process produces hydrogen gas (H2) at the cathode and oxygen gas (O2) at the anode. Hydrogen is highly flammable and explosive when mixed with air.</li>
<li><strong>Well-Ventilated Area:</strong> Conduct the electrolysis process outdoors or in a very well-ventilated area, such as a garage with open doors and a fan. Never do this in an enclosed space.</li>
<li><strong>No Open Flames or Sparks:</strong> Keep all sources of ignition (cigarettes, open flames, pilot lights, grinding sparks, etc.) far away from the electrolysis setup. Even touching the electrical leads together can create a spark.</li>
</ul>
</li>
<li>
<p><strong>Chemical Safety (Electrolyte):</strong></p>
<ul>
<li><strong>Alkaline Solution:</strong> Washing soda (sodium carbonate) solution is alkaline. While not as corrosive as strong acids or bases, it can cause skin and eye irritation.</li>
<li><strong>Personal Protective Equipment (PPE):</strong> Always wear <strong>safety glasses or goggles</strong> to protect your eyes from splashes and hydrogen gas bubbles. Wear <strong>rubber gloves</strong> to protect your skin from prolonged contact with the alkaline solution.</li>
<li><strong>Emergency Contact:</strong> In case of skin or eye contact, rinse thoroughly with plenty of fresh water. If irritation persists, seek medical attention.</li>
<li><strong>No Dangerous Salts:</strong> As mentioned, do <strong>NOT</strong> use table salt (sodium chloride) as your electrolyte. It can produce toxic chlorine gas. Caustic soda (sodium hydroxide) is too corrosive for general DIY use.</li>
</ul>
</li>
<li>
<p><strong>Material Selection for Anodes:</strong></p>
<ul>
<li><strong>Avoid Stainless Steel:</strong> This is a critical safety point. Using stainless steel as your anode can create <strong>hexavalent chromium</strong>, a highly toxic and carcinogenic compound, in your solution. Stick to mild steel, rebar, or scrap iron.</li>
<li><strong>Avoid Galvanized Steel:</strong> Galvanized steel has a zinc coating that can also release toxic compounds into the solution.</li>
</ul>
</li>
<li>
<p><strong>Post-Treatment:</strong></p>
<ul>
<li><strong>Flash Rust:</strong> Once removed from the electrolyte bath, the clean metal will be highly susceptible to &ldquo;flash rust&rdquo; (rapid re-oxidation) if left exposed to air and moisture.</li>
<li><strong>Immediate Drying and Protection:</strong> Immediately rinse the cleaned object with clean water, dry it thoroughly (with a towel, compressed air, or heat gun), and apply a protective coating (oil, wax, primer, paint) as soon as possible.</li>
<li><strong>Dispose of Sludge:</strong> The black sludge that forms in the tank contains iron oxides and sometimes heavy metals from the rusted object. Dispose of the electrolyte solution and sludge responsibly according to local environmental regulations. Do not pour it down the drain or onto your lawn.</li>
</ul>
</li>
</ol>
<p>By diligently following these safety guidelines, you can minimize risks and enjoy the benefits of effective rust removal via electrolysis.</p>
<h2 id="final-thoughts-on-rust-removal-using-electrolysis">Final Thoughts on Rust Removal Using Electrolysis<a hidden class="anchor" aria-hidden="true" href="#final-thoughts-on-rust-removal-using-electrolysis">¶</a></h2>
<p>Electrolysis offers a powerful and often superior method for removing rust, particularly for items where preserving the original metal surface is crucial. Its non-abrasive nature means no loss of material, making it ideal for antique tools, intricate components, or any object you wish to restore to its former glory without sacrificing its integrity. The ability to reach into nooks and crannies that wire brushes or sandpaper can&rsquo;t access is another significant advantage.</p>
<p>While the setup might seem a bit daunting at first, the core components are readily available, and the process itself is surprisingly straightforward once you understand the principles. The greatest emphasis, however, must always be placed on safety. Working with electricity and water, combined with the production of flammable gases and potentially irritating alkaline solutions, demands careful attention to precautions like proper ventilation, electrical safety (especially GFCI protection), and avoiding hazardous anode materials like stainless steel.</p>
<p>The satisfaction of watching a heavily rusted item transform into clean metal without arduous scrubbing or harsh chemicals is immensely rewarding. With patience, a methodical approach, and unwavering commitment to safety, electrolysis can become an invaluable technique in your restoration arsenal, breathing new life into cherished metal objects and extending their lifespan for years to come. Remember to always rinse and protect your newly de-rusted items immediately to prevent the dreaded flash rust.</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/how-to-remove-rust-from-metal-before-painting/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>How to Remove Rust from Metal Before Painting</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/how-to-remove-soot-from-walls/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>How to Remove Soot from Walls</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span style="display: inline-block; margin-left: 1em; font-size: 18px;">
    We may earn a commission when you click and buy from Amazon.com.
  <span style="display: inline-block; margin-left: 1em;">
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
