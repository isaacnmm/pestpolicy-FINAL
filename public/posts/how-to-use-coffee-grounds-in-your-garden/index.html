<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
 
<title>How to Use Coffee Grounds in Your Garden | Pest Policy</title>
<meta name="keywords" content="
   guides, coffee, ground">


<meta name="description" content="For many of us, coffee is an indispensable part of our daily routine. But what happens to all those leftover coffee grounds? Instead of discarding them, sa...">

<meta name="author" content="Isaac">
<link rel="canonical" href="http://localhost:1313/posts/how-to-use-coffee-grounds-in-your-garden/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.24117e94f7185554bf370e131546657a05d72834bf02c67c2a4215d5cf110a80.css" integrity="sha256-JBF&#43;lPcYVVS/Nw4TFUZlegXXKDS/AsZ8KkIV1c8RCoA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/how-to-use-coffee-grounds-in-your-garden/">

 
<meta name="twitter:title" content="How to Use Coffee Grounds in Your Garden | Pest Policy" />


<meta name="twitter:description" content="For many of us, coffee is an indispensable part of our daily routine. But what happens to all those leftover coffee grounds? Instead of discarding them, sa..." />
<meta property="og:title" content="How to Use Coffee Grounds in Your Garden | Pest Policy" />
<meta property="og:description" content="For many of us, coffee is an indispensable part of our daily routine. But what happens to all those leftover coffee grounds? Instead of discarding them, sa..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/how-to-use-coffee-grounds-in-your-garden/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-07-10T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2025-07-10T00:00:00&#43;03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "How to Use Coffee Grounds in Your Garden",
      "item": "http://localhost:1313/posts/how-to-use-coffee-grounds-in-your-garden/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How to Use Coffee Grounds in Your Garden | Pest Policy",
  "name": "How to Use Coffee Grounds in Your Garden",
  "description": "For many of us, coffee is an indispensable part of our daily routine. But what happens to all those leftover coffee grounds? Instead of discarding them, sa...",
  "keywords": [
    "guides", "coffee", "ground"
  ],
  "wordCount" : "1327",
  "inLanguage": "en",
  "datePublished": "2025-07-10T00:00:00Z",
  "dateModified": "2025-07-10T00:00:00+03:00",
  "author":{
    "@type": "Person",
    "name": "Isaac"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/how-to-use-coffee-grounds-in-your-garden/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pest Policy",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
   
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369419631229178"
     crossorigin="anonymous"></script>
</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pest Policy (Alt + H)">Pest Policy</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Blog" class="active"
                >Blog
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact"
                >Contact
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">How to Use Coffee Grounds in Your Garden</h1>
    <div class="post-description">For many of us, coffee is an indispensable part of our daily routine. But what happens to all those leftover coffee grounds? Instead of discarding them, sa...</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>July 10, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="http://localhost:1313/tags/guides/">Guides</a><a href="http://localhost:1313/tags/coffee/">Coffee</a><a href="http://localhost:1313/tags/ground/">Ground</a></span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>For many of us, coffee is an indispensable part of our daily routine. But what happens to all those leftover coffee grounds? Instead of discarding them, savvy gardeners have discovered that these unassuming remnants of our morning brew are a valuable, sustainable resource that can bring numerous benefits to the garden. Repurposing coffee grounds is an excellent way to reduce waste, enrich your soil, and potentially boost the health and vitality of certain plants.</p>
<p>From improving soil structure to deterring pests, coffee grounds offer a surprising range of uses. However, like any garden amendment, understanding how to use them correctly is key to unlocking their full potential without causing unintended harm. This guide will delve into the science behind coffee grounds in the garden, explore practical application methods, identify which plants stand to benefit most, and offer tips for proper storage.</p>
<h2 id="how-coffee-grounds-affect-plants">How Coffee Grounds Affect Plants<a hidden class="anchor" aria-hidden="true" href="#how-coffee-grounds-affect-plants">¶</a></h2>
<p>The impact of coffee grounds on plants and soil is a topic of much discussion among gardeners. Here&rsquo;s a breakdown of their primary effects:</p>
<ol>
<li><strong>Nutrient Content:</strong>
<ul>
<li>Coffee grounds are a source of several essential plant nutrients, though in relatively small amounts compared to commercial fertilizers.</li>
<li>They are particularly noted for their nitrogen content (around 2% by dry weight), which is crucial for leafy green growth. However, this nitrogen is &ldquo;tied up&rdquo; in organic matter and becomes available slowly as the grounds decompose.</li>
<li>They also contain trace amounts of potassium, phosphorus, calcium, magnesium, and other micronutrients.</li>
</ul>
</li>
<li><strong>Soil pH:</strong>
<ul>
<li>Contrary to popular belief, <strong>used coffee grounds are nearly pH neutral</strong> (around pH 6.5 to 6.8), not highly acidic. The acidity is largely leached out during the brewing process.</li>
<li>While fresh, unbrewed coffee grounds are acidic, used grounds will have a negligible effect on soil pH in most garden applications.</li>
</ul>
</li>
<li><strong>Organic Matter and Soil Structure:</strong>
<ul>
<li>Coffee grounds are rich in organic matter. When incorporated into soil, they improve soil structure by adding bulk and aeration, which is beneficial for root growth and water retention.</li>
<li>They help to lighten heavy clay soils and add body to sandy soils.</li>
</ul>
</li>
<li><strong>Microbial Activity:</strong>
<ul>
<li>The carbon and nitrogen in coffee grounds stimulate beneficial microbial activity in the soil, including bacteria and fungi that break down organic matter and make nutrients available to plants.</li>
</ul>
</li>
<li><strong>Pest Repellent (Limited):</strong>
<ul>
<li>Some anecdotal evidence suggests that the caffeine and specific compounds in coffee grounds might deter certain pests like slugs, snails, and even cats, though scientific evidence for widespread effectiveness is mixed.</li>
</ul>
</li>
</ol>
<h2 id="ways-to-use-coffee-grounds-in-gardening">Ways To Use Coffee Grounds In Gardening<a hidden class="anchor" aria-hidden="true" href="#ways-to-use-coffee-grounds-in-gardening">¶</a></h2>
<p>There are several practical and effective ways to integrate used coffee grounds into your gardening routine.</p>
<ol>
<li><strong>Compost Enhancer:</strong>
<ul>
<li><strong>Method:</strong> This is arguably the <strong>best and safest way</strong> to use coffee grounds. Add them directly to your compost pile.</li>
<li><strong>Benefit:</strong> Coffee grounds are considered a &ldquo;green&rdquo; material in composting, providing a good source of nitrogen and carbon. They help heat up the pile and accelerate decomposition. Their fine texture also helps to balance coarser materials.</li>
<li><strong>Ratio:</strong> Aim for a ratio of about 1 part coffee grounds to 3-4 parts &ldquo;brown&rdquo; materials (carbon-rich, like dry leaves, shredded paper) to maintain a healthy carbon-to-nitrogen balance.</li>
</ul>
</li>
<li><strong>Soil Amendment/Top Dressing:</strong>
<ul>
<li><strong>Method:</strong> Mix used coffee grounds directly into garden soil before planting, or spread a thin layer ($0.5-1$ cm / $1/4-1/2$ inch) as a top dressing around established plants.</li>
<li><strong>Benefit:</strong> Slowly releases nutrients, improves soil texture, and enhances microbial activity.</li>
<li><strong>Caution:</strong> Apply in moderation. Large, thick layers of coffee grounds can compact, become water-repellent, and inhibit growth by creating a barrier or temporarily tying up nitrogen as they decompose. Mix them into the topsoil rather than laying a solid mat.</li>
</ul>
</li>
<li><strong>Liquid Fertilizer (Compost Tea):</strong>
<ul>
<li><strong>Method:</strong> Steep about 1 cup of used coffee grounds in 5 gallons of water for a few days. Strain the liquid and use it to water plants.</li>
<li><strong>Benefit:</strong> Provides a mild, nutrient-rich boost.</li>
<li><strong>Caution:</strong> Test on a small area first. This is a weak fertilizer, not a substitute for regular feeding for heavy feeders.</li>
</ul>
</li>
<li><strong>Worm Composting (Vermicomposting):</strong>
<ul>
<li><strong>Method:</strong> Worms love coffee grounds! Add them in moderation to your worm bin.</li>
<li><strong>Benefit:</strong> Excellent food source for worms, contributing to rich vermicompost.</li>
<li><strong>Caution:</strong> Add gradually and in small amounts. Too many coffee grounds at once can make the bin too acidic for worms.</li>
</ul>
</li>
<li><strong>Slug and Snail Deterrent:</strong>
<ul>
<li><strong>Method:</strong> Create a barrier of coffee grounds around susceptible plants.</li>
<li><strong>Benefit:</strong> The gritty texture and residual caffeine are believed to deter slugs and snails, as they dislike crawling over rough surfaces and may be sensitive to caffeine.</li>
<li><strong>Effectiveness:</strong> Anecdotal evidence suggests some success, but effectiveness can vary. Rain can wash away the barrier.</li>
</ul>
</li>
<li><strong>Cat Repellent:</strong>
<ul>
<li><strong>Method:</strong> Sprinkle coffee grounds around areas where cats are digging or fouling.</li>
<li><strong>Benefit:</strong> Cats generally dislike the strong smell of coffee grounds.</li>
<li><strong>Effectiveness:</strong> Can be a temporary deterrent.</li>
</ul>
</li>
<li><strong>Acid-Loving Plants (Limited Direct Use):</strong>
<ul>
<li>While used coffee grounds are not highly acidic, some gardeners still sprinkle small amounts around acid-loving plants. If your soil is already acidic, this won&rsquo;t change it much.</li>
<li><strong>Best Use for Acid Lovers:</strong> The best way to use coffee grounds for acid-loving plants is through compost, as the composting process mellows the pH and provides organic matter.</li>
</ul>
</li>
</ol>
<h2 id="plants-that-benefit-most-from-coffee-grounds">Plants That Benefit Most from Coffee Grounds<a hidden class="anchor" aria-hidden="true" href="#plants-that-benefit-most-from-coffee-grounds">¶</a></h2>
<p>Given their neutral to slightly acidic pH (when used) and nutrient content, coffee grounds are particularly beneficial for:</p>
<ol>
<li><strong>Acid-Loving Plants (Indirectly via Compost):</strong>
<ul>
<li>While direct application has limited pH impact, incorporating coffee grounds into compost provides humic acids that can slowly lower soil pH over time and improve soil structure for these plants.</li>
<li><strong>Examples:</strong> Azaleas, Rhododendrons, Blueberries, Hydrangeas (can intensify blue color if soil is already acidic), Camellias.</li>
</ul>
</li>
<li><strong>Vegetables that Prefer Slightly Acidic to Neutral Soil and Love Nitrogen:</strong>
<ul>
<li><strong>Examples:</strong> Tomatoes, Carrots, Roses, Onions, Potatoes, Corn, leafy greens (Lettuce, Spinach, Kale).</li>
</ul>
</li>
<li><strong>Fruiting Plants:</strong> The potassium content (though low) can be beneficial.
<ul>
<li><strong>Examples:</strong> Strawberries, Raspberries.</li>
</ul>
</li>
</ol>
<p><strong>Plants that <em>may</em> not benefit (or where caution is advised):</strong></p>
<ul>
<li><strong>Alkaline-loving plants:</strong> While used grounds won&rsquo;t significantly lower pH, they won&rsquo;t help if your soil is too alkaline.</li>
<li><strong>Seedlings:</strong> High concentrations of coffee grounds, especially uncomposted, can inhibit seed germination due to certain compounds. It&rsquo;s best to use them around established plants or through compost.</li>
<li><strong>Plants in very hot, dry climates:</strong> If used as a thick top dressing, coffee grounds can sometimes form a crust that repels water once dry, making it harder for water to penetrate.</li>
</ul>
<h2 id="how-to-store-coffee-grounds-for-gardening">How To Store Coffee Grounds for Gardening<a hidden class="anchor" aria-hidden="true" href="#how-to-store-coffee-grounds-for-gardening">¶</a></h2>
<p>Proper storage is essential to prevent mold growth and maintain the quality of your coffee grounds.</p>
<ul>
<li><strong>Dry Them Out:</strong> This is the most crucial step. After brewing, spread the used coffee grounds thinly on a tray, old newspaper, or a baking sheet. Allow them to air dry completely. This prevents mold and mildew.</li>
<li><strong>Store in an Airtight Container:</strong> Once completely dry, store the grounds in an airtight container (e.g., plastic bin, glass jar) in a cool, dry place.</li>
<li><strong>Refrigerate/Freeze (Short Term):</strong> If you can&rsquo;t dry them immediately, you can store them in the refrigerator or freezer for a few days to prevent mold until you can dry them out.</li>
<li><strong>Avoid Wet Storage:</strong> Do not store wet coffee grounds in a sealed container, as they will quickly develop mold, which can be harmful to plants and soil.</li>
</ul>
<h2 id="our-take">Our Take<a hidden class="anchor" aria-hidden="true" href="#our-take">¶</a></h2>
<p>Used coffee grounds are a valuable, free resource for gardeners. Their primary benefits lie in their ability to enrich soil with organic matter, slowly release minor nutrients, and boost beneficial microbial activity. While their impact on soil pH is minimal once brewed, they are a fantastic addition to compost piles and can be cautiously used as a top dressing for many plants.</p>
<p>However, moderation is key. Like any amendment, overuse can lead to problems. By drying them properly, integrating them into your composting routine, or applying them sparingly as a top dressing, you can effectively repurpose your daily brew into a sustainable boost for your garden, contributing to healthier plants and a thriving ecosystem. So next time you finish your cup, think of your garden � it might just thank you for the grounds!</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/how-to-use-an-hvlp-paint-sprayer/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>How to Use an Hvlp Paint Sprayer</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/how-to-use-eucalyptus-oil-for-bed-bugs/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>How to Use Eucalyptus Oil for Bed Bugs</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span style="display: inline-block; margin-left: 1em; font-size: 18px;">
    We may earn a commission when you click and buy from Amazon.com.
  <span style="display: inline-block; margin-left: 1em;">
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
