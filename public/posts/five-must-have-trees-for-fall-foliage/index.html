<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
 
<title>Five Must Have Trees for Fall Foliage | Pest Policy</title>
<meta name="keywords" content="
   guides, tree, spectacular">


<meta name="description" content="As summer&#39;s green abundance begins to wane, a new and often more breathtaking spectacle emerges: fall foliage. The transformation of leaves from verdant gr...">

<meta name="author" content="Isaac">
<link rel="canonical" href="http://localhost:1313/posts/five-must-have-trees-for-fall-foliage/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.24117e94f7185554bf370e131546657a05d72834bf02c67c2a4215d5cf110a80.css" integrity="sha256-JBF&#43;lPcYVVS/Nw4TFUZlegXXKDS/AsZ8KkIV1c8RCoA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/five-must-have-trees-for-fall-foliage/">

 
<meta name="twitter:title" content="Five Must Have Trees for Fall Foliage | Pest Policy" />


<meta name="twitter:description" content="As summer&#39;s green abundance begins to wane, a new and often more breathtaking spectacle emerges: fall foliage. The transformation of leaves from verdant gr..." />
<meta property="og:title" content="Five Must Have Trees for Fall Foliage | Pest Policy" />
<meta property="og:description" content="As summer&#39;s green abundance begins to wane, a new and often more breathtaking spectacle emerges: fall foliage. The transformation of leaves from verdant gr..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/five-must-have-trees-for-fall-foliage/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-07-10T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2025-07-10T00:00:00&#43;03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Five Must Have Trees for Fall Foliage",
      "item": "http://localhost:1313/posts/five-must-have-trees-for-fall-foliage/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Five Must Have Trees for Fall Foliage | Pest Policy",
  "name": "Five Must Have Trees for Fall Foliage",
  "description": "As summer's green abundance begins to wane, a new and often more breathtaking spectacle emerges: fall foliage. The transformation of leaves from verdant gr...",
  "keywords": [
    "guides", "tree", "spectacular"
  ],
  "wordCount" : "1208",
  "inLanguage": "en",
  "datePublished": "2025-07-10T00:00:00Z",
  "dateModified": "2025-07-10T00:00:00+03:00",
  "author":{
    "@type": "Person",
    "name": "Isaac"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/five-must-have-trees-for-fall-foliage/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pest Policy",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
   
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369419631229178"
     crossorigin="anonymous"></script>
</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pest Policy (Alt + H)">Pest Policy</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Blog" class="active"
                >Blog
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact"
                >Contact
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Five Must Have Trees for Fall Foliage</h1>
    <div class="post-description">As summer&#39;s green abundance begins to wane, a new and often more breathtaking spectacle emerges: fall foliage. The transformation of leaves from verdant gr...</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>July 10, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="http://localhost:1313/tags/guides/">Guides</a><a href="http://localhost:1313/tags/tree/">Tree</a><a href="http://localhost:1313/tags/spectacular/">Spectacular</a></span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>As summer&rsquo;s green abundance begins to wane, a new and often more breathtaking spectacle emerges: fall foliage. The transformation of leaves from verdant green to brilliant hues of red, orange, yellow, and purple is a fleeting yet powerful display of nature&rsquo;s artistry. For gardeners and homeowners in temperate climates, choosing trees specifically for their autumn show is a cornerstone of thoughtful landscape design, extending the season of interest long after summer blooms have faded.</p>
<p>While the tropics, including Nairobi, don&rsquo;t experience the dramatic deciduous fall foliage common in temperate zones, for those designing landscapes in regions where autumn truly shines, selecting the right trees can elevate a garden from merely attractive to truly spectacular. This article focuses on five &ldquo;must-have&rdquo; trees renowned globally for their exceptional fall color, offering a reliable and dazzling performance year after year. From stately maples to vibrant oaks, these trees promise to paint your autumn landscape with unforgettable splendor.</p>
<hr>
<h2 id="understanding-fall-foliage">Understanding Fall Foliage<a hidden class="anchor" aria-hidden="true" href="#understanding-fall-foliage">¶</a></h2>
<p>The vibrant colors of fall leaves are not new pigments but rather the unmasking of existing ones. Chlorophyll, the green pigment responsible for photosynthesis, breaks down as days shorten and temperatures cool. This allows other pigments � carotenoids (yellows and oranges) and anthocyanins (reds and purples, produced in response to bright light and cool temperatures) � to become visible, creating the glorious autumn display. The intensity of fall color is influenced by species, genetics, weather (sunny days, cool nights), and <a href="/posts/10-trees-to-grow-in-containers/">tree</a> health.</p>
<hr>
<h2 id="five-must-have-trees-for-spectacular-fall-foliage">Five Must-Have Trees for Spectacular Fall Foliage<a hidden class="anchor" aria-hidden="true" href="#five-must-have-trees-for-spectacular-fall-foliage">¶</a></h2>
<h3 id="1-sugar-maple-acer-saccharum">1. Sugar Maple (<em>Acer saccharum</em>)<a hidden class="anchor" aria-hidden="true" href="#1-sugar-maple-acer-saccharum">¶</a></h3>
<ul>
<li><strong>Fall Colors:</strong> Renowned for arguably the most spectacular fall display, ranging from brilliant oranges and fiery reds to vibrant yellows. Each tree can exhibit a kaleidoscope of colors.</li>
<li><strong>Characteristics:</strong> A large, stately deciduous tree, typically growing 60-100 feet tall with a dense, rounded canopy. Its bark is typically light gray, furrowed with age.</li>
<li><strong>Growth Requirements:</strong>
<ul>
<li><strong>Hardiness Zones:</strong> USDA Zones 3-8.</li>
<li><strong>Light:</strong> Full sun to partial shade. Best fall color in full sun.</li>
<li><strong>Soil:</strong> Prefers moist, well-drained, slightly acidic to neutral soil. Tolerates a range of soil types but dislikes compacted soil and road salt.</li>
</ul>
</li>
<li><strong>Landscape Use:</strong> An excellent shade tree for large properties, parks, or as a specimen tree. Its dense canopy provides significant summer cooling.</li>
<li><strong>Considerations:</strong> Needs ample space to grow. Can be sensitive to urban pollution and compacted soils.</li>
</ul>
<h3 id="2-red-maple-acer-rubrum">2. Red Maple (<em>Acer rubrum</em>)<a hidden class="anchor" aria-hidden="true" href="#2-red-maple-acer-rubrum">¶</a></h3>
<ul>
<li><strong>Fall Colors:</strong> True to its name, the Red Maple consistently delivers brilliant shades of red, often scarlet, crimson, or orangey-red. Some cultivars offer deep purples.</li>
<li><strong>Characteristics:</strong> A medium to large deciduous tree, typically 40-60 feet tall, with a relatively fast growth rate and an oval to rounded crown. Its bark is smooth and grayish when young, becoming furrowed with age. Features reddish twigs and buds in winter, providing multi-season interest.</li>
<li><strong>Growth Requirements:</strong>
<ul>
<li><strong>Hardiness Zones:</strong> USDA Zones 3-9. Very adaptable to a wide range of climates and soil conditions, including wetter sites.</li>
<li><strong>Light:</strong> Full sun to partial shade.</li>
<li><strong>Soil:</strong> Tolerant of various soil types, including wet conditions, but prefers slightly acidic to neutral soil.</li>
</ul>
</li>
<li><strong>Landscape Use:</strong> Versatile as a shade tree, street tree (if tolerant cultivars are chosen), or specimen tree. Its adaptability makes it a popular choice.</li>
<li><strong>Considerations:</strong> Some cultivars can struggle with alkaline soils, leading to chlorosis (yellowing leaves). Choose a cultivar suited to your soil pH.</li>
</ul>
<h3 id="3-scarlet-oak-quercus-coccinea">3. Scarlet Oak (<em>Quercus coccinea</em>)<a hidden class="anchor" aria-hidden="true" href="#3-scarlet-oak-quercus-coccinea">¶</a></h3>
<ul>
<li><strong>Fall Colors:</strong> Offers a dazzling display of rich scarlet to crimson red, often holding its leaves well into late fall or early winter, extending the color season.</li>
<li><strong>Characteristics:</strong> A medium to large deciduous tree, typically 50-70 feet tall, with an open, rounded crown. Its deeply lobed, glossy green leaves give it a distinct appearance in summer.</li>
<li><strong>Growth Requirements:</strong>
<ul>
<li><strong>Hardiness Zones:</strong> USDA Zones 4-9.</li>
<li><strong>Light:</strong> Full sun.</li>
<li><strong>Soil:</strong> Prefers well-drained, acidic soil. Tolerates dry, sandy soils and urban conditions better than some other oaks once established.</li>
</ul>
</li>
<li><strong>Landscape Use:</strong> Excellent as a shade tree, specimen tree, or for naturalized areas where its brilliant fall color can be admired. Provides strong structural interest.</li>
<li><strong>Considerations:</strong> Can be slow to establish but is long-lived. Acorns can be a nuisance for some. Requires acidic soil for best color and health.</li>
</ul>
<h3 id="4-ginkgo-ginkgo-biloba">4. Ginkgo (<em>Ginkgo biloba</em>)<a hidden class="anchor" aria-hidden="true" href="#4-ginkgo-ginkgo-biloba">¶</a></h3>
<ul>
<li><strong>Fall Colors:</strong> Famous for its absolutely brilliant, uniform golden-yellow fall color. The fan-shaped leaves turn almost overnight and often drop all at once, creating a stunning golden carpet beneath the tree.</li>
<li><strong>Characteristics:</strong> A unique, ancient deciduous tree (the only surviving species in its order), typically growing 50-80 feet tall with an upright, often pyramidal, habit when young, broadening with age. Distinctive fan-shaped leaves.</li>
<li><strong>Growth Requirements:</strong>
<ul>
<li><strong>Hardiness Zones:</strong> USDA Zones 3-9. Exceptionally tolerant of urban conditions.</li>
<li><strong>Light:</strong> Full sun to partial shade.</li>
<li><strong>Soil:</strong> Highly adaptable to a wide range of soil types, including compacted, poor, and alkaline soils. Tolerates pollution and salt well.</li>
</ul>
</li>
<li><strong>Landscape Use:</strong> Excellent street tree, park tree, or specimen tree for urban environments where other trees struggle. Its architectural form is striking even in winter.</li>
<li><strong>Considerations:</strong> <strong>Choose male cultivars only!</strong> Female ginkgo trees produce fruit with a foul odor (like rancid butter) when crushed. Reputable nurseries sell only male cultivars (e.g., &lsquo;Autumn Gold&rsquo;, &lsquo;Princeton Sentry&rsquo;, &lsquo;Magyar&rsquo;). Can be slow to moderate growing.</li>
</ul>
<h3 id="5-serviceberry-amelanchier-spp---eg-autumn-brilliance-serviceberry">5. Serviceberry (<em>Amelanchier spp.</em> - e.g., &lsquo;Autumn Brilliance&rsquo; Serviceberry)<a hidden class="anchor" aria-hidden="true" href="#5-serviceberry-amelanchier-spp---eg-autumn-brilliance-serviceberry">¶</a></h3>
<ul>
<li><strong>Fall Colors:</strong> Provides a vibrant tapestry of orange, red, and sometimes purple, often combined with subtle yellow tones.</li>
<li><strong>Characteristics:</strong> A smaller, understory deciduous tree or large shrub, typically 15-25 feet tall, offering multi-season interest: delicate white spring flowers, edible purplish-red summer berries (attractive to birds), and beautiful fall foliage. Smooth, silvery bark.</li>
<li><strong>Growth Requirements:</strong>
<ul>
<li><strong>Hardiness Zones:</strong> USDA Zones 4-8.</li>
<li><strong>Light:</strong> Full sun to partial shade. Best flowering and fall color in full sun.</li>
<li><strong>Soil:</strong> Adaptable but prefers moist, well-drained, acidic to neutral soil. Tolerates clay.</li>
</ul>
</li>
<li><strong>Landscape Use:</strong> Perfect for smaller gardens, as an understory tree, in mixed shrub borders, or as a specimen tree. Provides excellent habitat and food for birds.</li>
<li><strong>Considerations:</strong> Can be susceptible to some diseases like rust, powdery mildew, and fire blight, though many cultivars offer improved resistance. Berries can create a light mess if planted over patios.</li>
</ul>
<hr>
<h2 id="designing-for-fall-color">Designing for Fall Color<a hidden class="anchor" aria-hidden="true" href="#designing-for-fall-color">¶</a></h2>
<p>When incorporating these trees into your landscape, consider the following:</p>
<ul>
<li><strong>Layering:</strong> Combine different trees and shrubs that offer complementary fall colors (e.g., golden Ginkgo with fiery Red Maples).</li>
<li><strong>Background:</strong> Plant trees with strong fall color against a backdrop of evergreens to make the autumn hues truly pop.</li>
<li><strong>Sightlines:</strong> Place trees where their fall transformation can be easily viewed from key vantage points, such as windows, patios, or entryways.</li>
<li><strong>Mature Size:</strong> Always account for the mature size of the tree when planting to avoid future overcrowding or conflicts with structures.</li>
</ul>
<hr>
<h2 id="final-thoughts">Final Thoughts<a hidden class="anchor" aria-hidden="true" href="#final-thoughts">¶</a></h2>
<p>While the tropical warmth of Nairobi might not experience the dramatic seasonal changes of temperate zones, for gardeners in regions where autumn truly flourishes, these five trees are unparalleled choices for creating breathtaking fall landscapes. From the classic reds and oranges of maples and oaks to the distinctive golden glow of the ginkgo and the multi-season charm of the serviceberry, each offers a unique contribution to the autumn palette. By selecting these &ldquo;must-have&rdquo; trees and understanding their specific needs, you can ensure that your garden will be awash in spectacular color, extending the beauty of your landscape well into the cooler months and providing a truly unforgettable display year after year.</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/fence-painting-ideas/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>Fence Painting Ideas</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/flea-bites-vs-bed-bug-bites/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>Flea Bites Vs Bed Bug Bites</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span style="display: inline-block; margin-left: 1em; font-size: 18px;">
    We may earn a commission when you click and buy from Amazon.com.
  <span style="display: inline-block; margin-left: 1em;">
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
