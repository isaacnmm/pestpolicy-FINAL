<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
 
<title>Gutter Drainage | Pest Policy</title>
<meta name="keywords" content="
   gutters, gutter, drainage">


<meta name="description" content="Effective gutter drainage is the cornerstone of a healthy, protected home. While gutters are adept at collecting rainwater and snowmelt from your roof, the...">

<meta name="author" content="Isaac">
<link rel="canonical" href="http://localhost:1313/posts/gutter-drainage/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.24117e94f7185554bf370e131546657a05d72834bf02c67c2a4215d5cf110a80.css" integrity="sha256-JBF&#43;lPcYVVS/Nw4TFUZlegXXKDS/AsZ8KkIV1c8RCoA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/gutter-drainage/">

 
<meta name="twitter:title" content="Gutter Drainage | Pest Policy" />


<meta name="twitter:description" content="Effective gutter drainage is the cornerstone of a healthy, protected home. While gutters are adept at collecting rainwater and snowmelt from your roof, the..." />
<meta property="og:title" content="Gutter Drainage | Pest Policy" />
<meta property="og:description" content="Effective gutter drainage is the cornerstone of a healthy, protected home. While gutters are adept at collecting rainwater and snowmelt from your roof, the..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/gutter-drainage/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-07-10T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2025-07-10T00:00:00&#43;03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Gutter Drainage",
      "item": "http://localhost:1313/posts/gutter-drainage/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Gutter Drainage | Pest Policy",
  "name": "Gutter Drainage",
  "description": "Effective gutter drainage is the cornerstone of a healthy, protected home. While gutters are adept at collecting rainwater and snowmelt from your roof, the...",
  "keywords": [
    "gutters", "gutter", "drainage"
  ],
  "wordCount" : "1526",
  "inLanguage": "en",
  "datePublished": "2025-07-10T00:00:00Z",
  "dateModified": "2025-07-10T00:00:00+03:00",
  "author":{
    "@type": "Person",
    "name": "Isaac"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/gutter-drainage/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pest Policy",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
   
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369419631229178"
     crossorigin="anonymous"></script>
</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pest Policy (Alt + H)">Pest Policy</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Blog" class="active"
                >Blog
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact"
                >Contact
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Gutter Drainage</h1>
    <div class="post-description">Effective gutter drainage is the cornerstone of a healthy, protected home. While gutters are adept at collecting rainwater and snowmelt from your roof, the...</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>July 10, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="http://localhost:1313/tags/gutters/">Gutters</a><a href="http://localhost:1313/tags/gutter/">Gutter</a><a href="http://localhost:1313/tags/drainage/">Drainage</a></span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>Effective gutter drainage is the cornerstone of a healthy, protected home. While <a href="/posts/all-american-gutters-reviews/">gutters</a> are adept at collecting rainwater and snowmelt from your roof, their job is only half done if that water isn&rsquo;t efficiently channeled <em>away</em> from your home&rsquo;s foundation. Poor <a href="/posts/are-gutters-necessary/">gutter</a> drainage can lead to a host of expensive and damaging problems, from saturated soil and foundation cracks to basement flooding, eroded landscaping, and compromised siding.</p>
<p>Understanding the principles of proper gutter drainage, identifying common issues, and implementing the right solutions are crucial steps for any homeowner. This involves more than just having gutters; it means ensuring they are correctly installed, free of clogs, and equipped with effective systems to discharge water far from your property&rsquo;s perimeter.</p>
<p>This guide will explore a comprehensive array of solutions for better gutter drainage, offer practical tips for managing runoff, detail different types of gutter drains, discuss how far and where gutters should drain, identify who might need to upgrade their system, and provide final thoughts on securing your home&rsquo;s perimeter against water damage.</p>
<hr>
<h2 id="13-solutions-for-better-gutter-drainage">13 Solutions for Better Gutter Drainage<a hidden class="anchor" aria-hidden="true" href="#13-solutions-for-better-gutter-drainage">¶</a></h2>
<p>Improving gutter drainage often involves a combination of maintenance, repair, and strategic upgrades.</p>
<ol>
<li><strong>Regular Gutter Cleaning:</strong> The most fundamental step. Remove leaves, twigs, shingle grit, and other debris from the gutter troughs and downspout openings at least twice a year (or more frequently if surrounded by trees).</li>
<li><strong>Clear Downspout Clogs:</strong> Ensure downspouts are free-flowing. Flush them with a hose or use a plumber&rsquo;s auger to clear stubborn blockages.</li>
<li><strong>Correct Gutter Pitch:</strong> Gutters must have a continuous slope towards downspouts (1/4 inch of drop per 10 feet of run). Re-pitch sagging sections by adjusting or adding hangers.</li>
<li><strong>Repair Leaks and Holes:</strong> Seal any leaks in seams, end caps, or holes in the gutter trough with exterior-grade gutter sealant to prevent water loss before it reaches the downspout.</li>
<li><strong>Install Gutter Guards:</strong> While not 100% maintenance-free, gutter guards (mesh, micro-mesh, reverse-curve) significantly reduce the amount of debris entering the gutters, preventing clogs and promoting consistent flow.</li>
<li><strong>Extend Downspout Diverters/Extensions:</strong> Add plastic or metal extensions to the bottom of downspouts to carry water at least 5-10 feet away from the foundation. Splash blocks can help disperse water.</li>
<li><strong>Install Underground Drainage (Drainage Pipe):</strong> Connect downspouts directly to buried pipes that carry water far away from the house to a pop-up emitter, dry well, or storm drain connection.</li>
<li><strong>Install French Drains:</strong> If surface water is a persistent issue near the foundation (even with good gutters), a French drain system can intercept and divert it. This is typically a complement to, not a replacement for, gutter drainage.</li>
<li><strong>Improve Yard Grading:</strong> Ensure the ground around your home slopes away from the foundation (minimum 6 inches drop over the first 10 feet). This is crucial for overall surface water management, regardless of gutters.</li>
<li><strong>Install Rain Barrels:</strong> While eco-friendly for water harvesting, ensure rain barrels have overflow kits that redirect excess water safely away from the foundation once full.</li>
<li><strong>Use Rain Chains (with caution):</strong> For small roof sections, rain chains can direct water from the gutter outlet, but they can cause splashing and are less efficient than downspouts for large volumes. Ensure proper ground drainage beneath.</li>
<li><strong>Add More Downspouts:</strong> For very long gutter runs or large roof areas, you might need additional downspouts to handle the volume of water, preventing the system from being overwhelmed.</li>
<li><strong>Upgrade Gutter Size:</strong> If your existing gutters are consistently overflowing during heavy rains, even when clean, they may be undersized for your roof&rsquo;s square footage and local rainfall intensity. Upgrading from standard 5-inch to 6-inch gutters might be necessary.</li>
</ol>
<hr>
<h2 id="tips-for-managing-gutter-runoff">Tips for Managing Gutter Runoff<a hidden class="anchor" aria-hidden="true" href="#tips-for-managing-gutter-runoff">¶</a></h2>
<p>Effective runoff management extends beyond the gutters themselves.</p>
<ul>
<li><strong>Regular Inspections:</strong> Beyond cleaning, periodically check your gutters and downspouts for sagging, leaks, loose hangers, or signs of damage.</li>
<li><strong>Trim Overhanging Branches:</strong> Reduce the amount of leaves and debris falling into your gutters by trimming trees close to your roofline.</li>
<li><strong>Monitor During Rainstorms:</strong> Observe your gutters during heavy rain. Are there any overflow points? Do downspouts flow freely? This helps identify specific problems.</li>
<li><strong>Address Ice Dams:</strong> In cold climates, ensure proper attic insulation and ventilation to prevent ice dams, which can block gutters and cause significant water issues.</li>
<li><strong>Consider Permeable Landscaping:</strong> Use permeable pavers or rain gardens in areas where water collects to allow it to infiltrate the ground naturally.</li>
</ul>
<hr>
<h2 id="types-of-gutter-drains">Types of Gutter Drains<a hidden class="anchor" aria-hidden="true" href="#types-of-gutter-drains">¶</a></h2>
<p>When discussing &ldquo;gutter drains,&rdquo; we typically refer to the downspouts and how they terminate or connect to further drainage systems.</p>
<ol>
<li><strong>Downspout Extensions (Above Ground):</strong>
<ul>
<li><strong>Plastic/Flexible:</strong> Common, often corrugated, easy to install, but can crack or get crushed.</li>
<li><strong>Metal (Aluminum/Vinyl):</strong> More durable than flexible plastic, often matching gutter material, but less flexible for routing.</li>
<li><strong>Splash Blocks:</strong> Concrete or plastic blocks placed at the downspout exit to disperse water and prevent erosion.</li>
</ul>
</li>
<li><strong>Underground Drainage Systems:</strong>
<ul>
<li><strong>Buried PVC Pipes:</strong> Downspouts connect directly to solid or perforated PVC pipes buried underground, which then carry water to a distant discharge point.</li>
<li><strong>Pop-Up Emitters:</strong> A common discharge point for underground pipes. A spring-loaded cap pops up when water flows, then retracts for a discreet look.</li>
<li><strong>Dry Wells:</strong> An underground pit filled with gravel, often with a perforated barrel, that collects and slowly disperses water into the surrounding soil. Good for properties with poor drainage or no municipal storm drain connection.</li>
<li><strong>French Drains:</strong> While primarily for subsurface water, downspouts can sometimes be tied into a French drain system if it&rsquo;s designed to handle additional runoff.</li>
</ul>
</li>
<li><strong>Rain Barrels:</strong> Collect rainwater for later use (e.g., watering gardens). Crucially, they must have an overflow mechanism that safely diverts excess water away from the foundation when full.</li>
<li><strong>Direct Connection to Storm Drains:</strong> In some urban areas, downspouts can be directly connected to a municipal storm drain system, but this usually requires permits and professional installation.</li>
</ol>
<hr>
<h2 id="best-gutter-drainage-solutions">Best Gutter Drainage Solutions<a hidden class="anchor" aria-hidden="true" href="#best-gutter-drainage-solutions">¶</a></h2>
<p>The &ldquo;best&rdquo; solution often involves a layered approach, but typically centers around these key elements:</p>
<ol>
<li><strong>Impeccable Gutter Maintenance:</strong> Regular cleaning, pitch correction, and prompt repairs are non-negotiable. A neglected system, regardless of its setup, will fail.</li>
<li><strong>Adequate Gutter Sizing and Downspout Quantity:</strong> Ensure your gutters and downspouts are appropriately sized for your roof area and local rainfall. More or larger downspouts might be needed for efficient discharge.</li>
<li><strong>Effective Downspout Extensions (Surface or Underground):</strong> The critical step is to get water <em>far enough away</em> from the foundation. For most homes, <strong>underground drainage systems with pop-up emitters or a dry well</strong> are the most effective and aesthetically pleasing long-term solutions, completely removing water from the immediate vicinity of the house.</li>
<li><strong>Proper Yard Grading:</strong> This serves as a vital backup and works in conjunction with your gutter system to ensure any surface water is directed away from the foundation.</li>
</ol>
<hr>
<h2 id="how-far-should-gutters-drain-from-the-house">How Far Should Gutters Drain From the House?<a hidden class="anchor" aria-hidden="true" href="#how-far-should-gutters-drain-from-the-house">¶</a></h2>
<p>Generally, downspout extensions should carry water <strong>at least 5 to 10 feet away</strong> from the foundation of the house. In some cases, especially with very flat lots, poor soil drainage, or significant rainfall, even further might be necessary. The goal is to direct water to a place where it can safely infiltrate the ground or be collected without pooling near the structure.</p>
<hr>
<h2 id="where-should-gutters-drain">Where Should Gutters Drain?<a hidden class="anchor" aria-hidden="true" href="#where-should-gutters-drain">¶</a></h2>
<p>Ideal drainage points for gutter runoff include:</p>
<ul>
<li><strong>Pervious Surfaces Away from the Foundation:</strong> Lawns, garden beds, or unpaved areas where water can slowly soak into the ground, provided they are sufficiently far from the house and slope away.</li>
<li><strong>Rain Barrels:</strong> For water collection and reuse.</li>
<li><strong>Dry Wells:</strong> For subterranean infiltration where direct surface discharge isn&rsquo;t feasible.</li>
<li><strong>Storm Drains:</strong> Where municipal infrastructure allows and local codes permit.</li>
<li><strong>Natural Swales or Ditches:</strong> Areas designed to carry water away from the property.</li>
</ul>
<p><strong>Avoid draining directly onto:</strong></p>
<ul>
<li><strong>Impervious Surfaces Near the Foundation:</strong> Patios, sidewalks, or driveways that slope back towards the house.</li>
<li><strong>Neighboring Properties:</strong> Directing your runoff onto a neighbor&rsquo;s property can lead to disputes and legal issues.</li>
<li><strong>Septic Systems:</strong> Avoid saturating drain fields.</li>
<li><strong>Foundation Footings:</strong> Never drain water directly onto or near the footings of your home.</li>
</ul>
<hr>
<h2 id="who-should-upgrade-their-gutter-system">Who Should Upgrade Their Gutter System?<a hidden class="anchor" aria-hidden="true" href="#who-should-upgrade-their-gutter-system">¶</a></h2>
<p>Consider upgrading your gutter drainage system if you experience any of the following:</p>
<ul>
<li><strong>Persistent Overflowing:</strong> Even after cleaning, if gutters frequently overflow during rain.</li>
<li><strong>Water in Basement/Crawl Space:</strong> Any sign of water intrusion indicates a drainage failure.</li>
<li><strong>Foundation Cracks or Settling:</strong> These are red flags for underlying water issues.</li>
<li><strong>Eroding Landscaping Near House:</strong> Signs of soil washout or trenches forming around the perimeter.</li>
<li><strong>Rotting Fascia or Siding:</strong> Indicative of consistent water exposure due to overflow.</li>
<li><strong>Outdated System:</strong> Old, undersized, or constantly leaking gutters are likely due for an overhaul.</li>
<li><strong>Selling Your Home:</strong> A well-functioning drainage system is a significant selling point and protects your investment.</li>
</ul>
<hr>
<h2 id="final-thoughts">Final Thoughts<a hidden class="anchor" aria-hidden="true" href="#final-thoughts">¶</a></h2>
<p>Effective gutter drainage is not just about having gutters; it&rsquo;s about managing every drop of water that falls on your roof, from collection to controlled discharge. Neglecting this crucial aspect of home maintenance can lead to silent, insidious damage that only becomes apparent when significant, costly repairs are required.</p>
<p>By embracing regular cleaning, prompt repairs, and potentially upgrading to advanced drainage solutions like underground pipes, you proactively safeguard your home&rsquo;s foundation, preserve its exterior, and protect your landscape. A well-designed and maintained gutter drainage system is an indispensable guardian, providing peace of mind and ensuring the long-term health and value of your property.</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/gutter-downspout-bags/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>Gutter Downspout Bags</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/gutter-guard-installation-cost/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>Gutter Guard Installation Cost</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span style="display: inline-block; margin-left: 1em; font-size: 18px;">
    We may earn a commission when you click and buy from Amazon.com.
  <span style="display: inline-block; margin-left: 1em;">
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
