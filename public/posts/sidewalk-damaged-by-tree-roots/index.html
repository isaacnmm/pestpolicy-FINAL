<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
 
<title>Sidewalk Damaged by Tree Roots | Pest Policy</title>
<meta name="keywords" content="
   guides, sidewalk, tree">


<meta name="description" content="Tree roots are powerful forces of nature, providing essential stability and nutrients to large, majestic trees. However, when planted too close to urban in...">

<meta name="author" content="Isaac">
<link rel="canonical" href="http://localhost:1313/posts/sidewalk-damaged-by-tree-roots/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.24117e94f7185554bf370e131546657a05d72834bf02c67c2a4215d5cf110a80.css" integrity="sha256-JBF&#43;lPcYVVS/Nw4TFUZlegXXKDS/AsZ8KkIV1c8RCoA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/sidewalk-damaged-by-tree-roots/">

 
<meta name="twitter:title" content="Sidewalk Damaged by Tree Roots | Pest Policy" />


<meta name="twitter:description" content="Tree roots are powerful forces of nature, providing essential stability and nutrients to large, majestic trees. However, when planted too close to urban in..." />
<meta property="og:title" content="Sidewalk Damaged by Tree Roots | Pest Policy" />
<meta property="og:description" content="Tree roots are powerful forces of nature, providing essential stability and nutrients to large, majestic trees. However, when planted too close to urban in..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/sidewalk-damaged-by-tree-roots/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-07-10T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2025-07-10T00:00:00&#43;03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Sidewalk Damaged by Tree Roots",
      "item": "http://localhost:1313/posts/sidewalk-damaged-by-tree-roots/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Sidewalk Damaged by Tree Roots | Pest Policy",
  "name": "Sidewalk Damaged by Tree Roots",
  "description": "Tree roots are powerful forces of nature, providing essential stability and nutrients to large, majestic trees. However, when planted too close to urban in...",
  "keywords": [
    "guides", "sidewalk", "tree"
  ],
  "wordCount" : "1637",
  "inLanguage": "en",
  "datePublished": "2025-07-10T00:00:00Z",
  "dateModified": "2025-07-10T00:00:00+03:00",
  "author":{
    "@type": "Person",
    "name": "Isaac"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/sidewalk-damaged-by-tree-roots/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pest Policy",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
   
</noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369419631229178"
     crossorigin="anonymous"></script>
</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pest Policy (Alt + H)">Pest Policy</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Blog" class="active"
                >Blog
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact"
                >Contact
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Sidewalk Damaged by Tree Roots</h1>
    <div class="post-description">Tree roots are powerful forces of nature, providing essential stability and nutrients to large, majestic trees. However, when planted too close to urban in...</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>July 10, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="http://localhost:1313/tags/guides/">Guides</a><a href="http://localhost:1313/tags/sidewalk/">Sidewalk</a><a href="http://localhost:1313/tags/tree/">Tree</a></span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p><a href="/posts/10-trees-to-grow-in-containers/">Tree</a> roots are powerful forces of nature, providing essential stability and nutrients to large, majestic trees. However, when planted too close to urban infrastructure, these very roots can become a significant problem, particularly for sidewalks. Heaving, cracked, and uneven sidewalks caused by tree roots are not only unsightly but also pose serious tripping hazards, leading to potential injuries and liability issues for homeowners and municipalities alike.</p>
<p>Addressing sidewalk damage caused by tree roots requires a careful balance: protecting the tree, ensuring public safety, and maintaining property value. This guide explores the common ways tree roots cause damage, viable repair options, and strategies to prevent future problems, offering solutions for a safer and more aesthetically pleasing environment.</p>
<h2 id="how-tree-roots-damage-sidewalks">How Tree Roots Damage Sidewalks<a hidden class="anchor" aria-hidden="true" href="#how-tree-roots-damage-sidewalks">¶</a></h2>
<p>The interaction between tree roots and sidewalks is a complex issue driven by the tree&rsquo;s natural growth patterns and the nature of construction materials.</p>
<ol>
<li><strong>Root Expansion:</strong> As tree roots grow, they naturally expand in diameter, much like a tree trunk. If a root encounters a hard surface like a sidewalk, it exerts immense pressure against it. Over time, this pressure can cause the concrete or paving stones to lift, crack, or fracture.</li>
<li><strong>Search for Water and Nutrients:</strong> Tree roots actively seek out water and nutrients. Cracks or joints in sidewalks, where moisture tends to accumulate, can attract roots. Once roots penetrate these small openings, their subsequent growth will widen the cracks and further displace the pavement.</li>
<li><strong>Lack of Adequate Space:</strong> In urban environments, trees are often planted in narrow tree pits or along rights-of-way where the soil is compacted and limited. This forces roots to grow closer to the surface and horizontally in search of oxygen, water, and less restrictive soil, leading them directly under sidewalks.</li>
<li><strong>Species Choice:</strong> Some tree species have more aggressive or shallow root systems (e.g., certain maples, sycamores, poplars) that are more prone to causing sidewalk damage than others with deeper or less expansive root patterns.</li>
<li><strong>Soil Conditions:</strong> Compacted soils or soils with poor drainage can also encourage roots to stay closer to the surface.</li>
<li><strong>Pavement Rigidity:</strong> Concrete sidewalks, being rigid, tend to crack and heave when stressed by root growth, while more flexible asphalt may deform or buckle.</li>
</ol>
<h2 id="options-for-repairing-sidewalks-damaged-by-roots">Options for Repairing Sidewalks Damaged by Roots<a hidden class="anchor" aria-hidden="true" href="#options-for-repairing-sidewalks-damaged-by-roots">¶</a></h2>
<p>Addressing root-damaged sidewalks can range from minor repairs to complete reconstruction, each with its own advantages and disadvantages.</p>
<ol>
<li>
<p><strong>Grinding/Ramping:</strong></p>
<ul>
<li><strong>Method:</strong> For minor heaving, sections of the sidewalk can be ground down to create a smooth, ramped transition, eliminating the tripping hazard. This is a temporary solution as the root will continue to grow.</li>
<li><strong>Pros:</strong> Relatively inexpensive, quick, and minimally invasive to the tree.</li>
<li><strong>Cons:</strong> Temporary (root continues to grow), can thin the sidewalk, and may not be suitable for severe heaving. Not always aesthetically pleasing.</li>
</ul>
</li>
<li>
<p><strong>Root Pruning:</strong></p>
<ul>
<li><strong>Method:</strong> Involves carefully cutting and removing the offending roots that are causing the damage. This should ideally be done by a certified arborist to minimize harm to the tree. Roots larger than 2-3 inches in diameter generally should not be pruned, as this can severely destabilize the tree or lead to decay.</li>
<li><strong>Pros:</strong> Can immediately resolve the lifting issue.</li>
<li><strong>Cons:</strong> Can stress or destabilize the tree, making it vulnerable to disease, pests, or even windthrow (falling over). Should only be considered as a last resort or if the root is relatively small and non-essential. <strong>Never prune a large anchoring root.</strong></li>
</ul>
</li>
</ol>
<h2 id="root-barriers">Root Barriers<a hidden class="anchor" aria-hidden="true" href="#root-barriers">¶</a></h2>
<p>Root barriers are physical obstructions designed to redirect root growth downwards or away from sidewalks and foundations.</p>
<ul>
<li>
<p><strong>Vertical Barriers:</strong></p>
<ul>
<li><strong>Method:</strong> A trench is dug between the tree and the sidewalk, and a sturdy, impermeable barrier (made of high-density plastic, fiberglass, or geotextile fabric) is inserted vertically into the ground. The barrier extends deep enough to encourage roots to grow beneath the sidewalk.</li>
<li><strong>Pros:</strong> Effective in redirecting roots, can be a long-term solution.</li>
<li><strong>Cons:</strong> Can be expensive to install, may still cause some root circling if installed too close to the tree, and can potentially impact tree stability if a significant portion of roots is severed during installation. Must be installed at the proper distance and depth from the tree.</li>
</ul>
</li>
<li>
<p><strong>Structural Soil or Root Cells:</strong></p>
<ul>
<li><strong>Method:</strong> These innovative systems create an underground growing medium that allows roots to grow deeply in compacted urban areas without damaging pavement. Structural soil is a mixture of gravel, soil, and a hydrogel that provides both compaction for pavement support and void space for root growth. Root cells are modular, load-bearing structures that create uncompacted soil volumes under sidewalks.</li>
<li><strong>Pros:</strong> Excellent long-term solution, promotes healthier root growth, significantly reduces sidewalk damage.</li>
<li><strong>Cons:</strong> High initial cost, typically used in new construction or major renovation projects rather than retrofitting existing damage.</li>
</ul>
</li>
</ul>
<h2 id="sidewalk-replacement">Sidewalk Replacement<a hidden class="anchor" aria-hidden="true" href="#sidewalk-replacement">¶</a></h2>
<p>Replacing the damaged section of the sidewalk is often necessary for significant damage.</p>
<ul>
<li>
<p><strong>Standard Replacement:</strong></p>
<ul>
<li><strong>Method:</strong> The damaged concrete section is removed, and a new section is poured. This may involve root pruning if roots are directly underneath.</li>
<li><strong>Pros:</strong> Creates a fresh, level surface.</li>
<li><strong>Cons:</strong> Does not address the underlying root growth, so the problem is likely to recur.</li>
</ul>
</li>
<li>
<p><strong>Root-Friendly Sidewalk Design:</strong></p>
<ul>
<li><strong>Method:</strong> When replacing, incorporate features that accommodate root growth. This can include:
<ul>
<li><strong>Flexible Pavement:</strong> Using asphalt or interlocking pavers instead of rigid concrete, as they can flex and absorb some root pressure.</li>
<li><strong>Skip Sidewalk Sections:</strong> Leaving unpaved gaps or permeable paving grids around trees to give roots more space.</li>
<li><strong>Suspended Pavements:</strong> Creating a void space under the sidewalk for roots to grow in uncompacted soil, supported by structural elements that bear the sidewalk&rsquo;s weight.</li>
<li><strong>Wider Tree Pits:</strong> Enlarging the area around the tree for root expansion.</li>
</ul>
</li>
<li><strong>Pros:</strong> Long-term solution that protects both the sidewalk and the tree.</li>
<li><strong>Cons:</strong> More expensive and complex than standard replacement, often requiring professional design and installation.</li>
</ul>
</li>
</ul>
<h2 id="professional-tree-and-sidewalk-repair">Professional Tree and Sidewalk Repair<a hidden class="anchor" aria-hidden="true" href="#professional-tree-and-sidewalk-repair">¶</a></h2>
<p>For any significant damage or large trees, engaging professionals is highly recommended.</p>
<ul>
<li><strong>Certified Arborists:</strong> Essential for assessing tree health, determining if roots can be safely pruned, recommending root barrier placement, or advising on tree removal. They understand tree biology and can balance tree health with sidewalk integrity.</li>
<li><strong>Landscape Architects/Engineers:</strong> Can design comprehensive solutions for new construction or major renovations, incorporating root-friendly pavement designs.</li>
<li><strong>Concrete Contractors:</strong> For grinding, ramping, or replacing sidewalk sections. Ensure they are experienced with root-damaged sidewalks and understand how to work around trees.</li>
<li><strong>Utility Companies:</strong> If utility lines are involved or potentially affected, always contact the relevant utility company before any digging or cutting. In Kenya, this would include Kenya Power and Lighting Company (KPLC), water and sewerage companies, and telecommunication providers.</li>
</ul>
<p><strong>The Process with Professionals:</strong></p>
<ol>
<li><strong>Assessment:</strong> An arborist will assess the tree&rsquo;s health, species, age, and the extent of root damage.</li>
<li><strong>Recommendations:</strong> Based on the assessment, they will recommend the least harmful and most effective solution, which might involve a combination of approaches.</li>
<li><strong>Permits:</strong> Professionals often assist with obtaining any necessary permits from local authorities.</li>
<li><strong>Execution:</strong> They perform the work safely and efficiently, minimizing risk to the tree and property.</li>
</ol>
<h2 id="plant-trees-in-the-right-place">Plant Trees in the Right Place<a hidden class="anchor" aria-hidden="true" href="#plant-trees-in-the-right-place">¶</a></h2>
<p>The best solution to sidewalk damage from tree roots is prevention.</p>
<ol>
<li><strong>Choose the Right Tree Species:</strong> Select trees with deep, non-aggressive, or more constrained root systems when planting near pavement. Research mature root habits before planting. Consult local arborists or university extension services for recommendations.
<ul>
<li><em>Examples of generally better choices for urban areas:</em> Ginkgo, London Plane Tree (if space allows), certain cultivars of oak or maple known for deeper roots, smaller ornamental trees with less expansive roots.</li>
<li><em>Avoid:</em> Silver Maple, Poplar, Weeping Willow, many Sycamore varieties, which are known for aggressive, shallow roots.</li>
</ul>
</li>
<li><strong>Provide Ample Planting Space:</strong> Give trees adequate space for their roots to grow without immediately encountering impervious surfaces. Wider tree pits or planting strips are ideal.</li>
<li><strong>Consider Underground Infrastructure:</strong> Before planting, know the location of all underground utilities to avoid future conflicts.</li>
<li><strong>Use Root Barriers During Planting (New Trees):</strong> If planting a tree near existing pavement, proactively install root barriers to direct roots downward and away from the sidewalk.</li>
<li><strong>Promote Healthy Root Growth:</strong> Ensure the tree has access to sufficient water and uncompacted soil to encourage deeper root growth, rather than roots spreading shallowly in search of resources.</li>
</ol>
<h2 id="faqs-about-repairing-sidewalks-damaged-by-roots">FAQs About Repairing Sidewalks Damaged by Roots<a hidden class="anchor" aria-hidden="true" href="#faqs-about-repairing-sidewalks-damaged-by-roots">¶</a></h2>
<ul>
<li><strong>Q: Can I just cut the tree roots myself?</strong>
<ul>
<li>A: <strong>No, not without professional advice.</strong> Cutting large roots can severely harm the tree, making it unstable and susceptible to disease. Always consult a certified arborist first.</li>
</ul>
</li>
<li><strong>Q: Will removing the damaged sidewalk hurt the tree?</strong>
<ul>
<li>A: Removing the sidewalk itself won&rsquo;t hurt the tree, but the process might involve severing roots. The extent of root damage will determine the impact on the tree.</li>
</ul>
</li>
<li><strong>Q: Who is responsible for repairing sidewalk damage from city trees?</strong>
<ul>
<li>A: This varies by jurisdiction. In some areas, the city is responsible for public sidewalks and trees in the right-of-way. In others, homeowners are responsible for sidewalks adjacent to their property, even if the tree is city-owned. Always check local ordinances (e.g., with your local county government or public works department in Kenya).</li>
</ul>
</li>
<li><strong>Q: Is it better to remove the tree or repair the sidewalk?</strong>
<ul>
<li>A: This depends on the severity of the damage, the tree&rsquo;s health, and its value to the property. An arborist can help you weigh these factors. If the tree is healthy and provides significant benefits, repair options that protect the tree are preferable. If the tree is in decline or poses a major risk, removal might be the best option.</li>
</ul>
</li>
</ul>
<h2 id="final-thoughts">Final Thoughts<a hidden class="anchor" aria-hidden="true" href="#final-thoughts">¶</a></h2>
<p>Dealing with sidewalks damaged by tree roots requires a thoughtful and often multi-faceted approach. While minor issues might be addressed with simple repairs, long-term solutions often involve strategic planning, root management techniques, and sometimes, the difficult decision of tree removal. By understanding the causes of damage and working with qualified professionals, you can ensure both the safety of your pathways and the health of your valuable trees, contributing to a harmonious and beautiful urban environment.</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/shower-wall-panels/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>Shower Wall Panels</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/signs-of-a-cockroach-infestation/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>Signs Of a Cockroach Infestation</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span style="display: inline-block; margin-left: 1em; font-size: 18px;">
    We may earn a commission when you click and buy from Amazon.com.
  <span style="display: inline-block; margin-left: 1em;">
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
